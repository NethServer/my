{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to My Documentation","text":"<p>Complete user and developer documentation for My - the centralized management platform.</p>"},{"location":"#what-is-my","title":"What is My?","text":"<p>My is a comprehensive management platform that provides:</p> <ul> <li>Centralized Authentication using Logto as Identity Provider</li> <li>Hierarchical Organization Management (Owner, Distributor, Reseller, Customer)</li> <li>Role-Based Access Control (RBAC) with dual-role system</li> <li>System Monitoring with real-time inventory and heartbeat tracking</li> <li>User Management with automatic welcome emails and self-service features</li> </ul>"},{"location":"#documentation-structure","title":"Documentation Structure","text":""},{"location":"#user-guide","title":"\ud83d\udcda User Guide","text":"<p>Complete guides for end users and administrators:</p> <ul> <li> <p> Getting Started</p> <p>Learn how to log in, manage your profile, and understand user roles.</p> <p> Authentication Guide</p> </li> <li> <p> Organizations</p> <p>Create and manage the business hierarchy: Distributors, Resellers, and Customers.</p> <p> Organizations Guide</p> </li> <li> <p> Users</p> <p>Create users, assign roles, and manage permissions across your organization.</p> <p> Users Guide</p> </li> <li> <p> Systems</p> <p>Create and monitor systems, view status, and manage system credentials.</p> <p> Systems Guide</p> </li> <li> <p> Registration</p> <p>Register external systems with My platform using system secrets.</p> <p> Registration Guide</p> </li> <li> <p> Monitoring</p> <p>Configure inventory collection and heartbeat monitoring for your systems.</p> <p> Inventory &amp; Heartbeat</p> </li> </ul>"},{"location":"#developer-documentation","title":"\ud83d\udcbb Developer Documentation","text":"<p>Technical documentation for developers and integrators:</p> <ul> <li>Backend API - Go REST API server with JWT authentication</li> <li>Collect Service - Inventory and heartbeat collection service</li> <li>Sync Tool - RBAC synchronization CLI tool</li> <li>Project Overview - Complete project documentation and architecture</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#for-end-users","title":"\ud83e\uddd1 For End Users","text":"<ol> <li>Log in with your credentials</li> <li>Create organizations based on your business hierarchy</li> <li>Add users and assign appropriate roles</li> <li>Create systems for your customers</li> <li>Register systems to enable monitoring</li> </ol>"},{"location":"#for-developers","title":"\ud83e\uddd1\u200d\ud83d\udcbb For Developers","text":"<ol> <li>Clone the repository</li> <li>Read the Project documentation</li> <li>Set up your development environment</li> <li>Follow the RBAC configuration guide</li> </ol>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#security-first","title":"\ud83d\udd10 Security First","text":"<ul> <li>Argon2id secret hashing (memory-hard, GPU-resistant)</li> <li>Token Split Pattern for system credentials</li> <li>JWT-based authentication with token blacklisting</li> <li>RBAC with hierarchical permissions</li> </ul>"},{"location":"#business-hierarchy","title":"\ud83c\udfe2 Business Hierarchy","text":"<pre><code>Owner (Nethesis)\n    \u2193\nDistributors\n    \u2193\nResellers\n    \u2193\nCustomers\n</code></pre> <p>Each level manages only their downstream organizations.</p>"},{"location":"#dual-role-system","title":"\ud83d\udc65 Dual-Role System","text":"<p>Organization Roles (business hierarchy): - Owner, Distributor, Reseller, Customer</p> <p>User Roles (technical capabilities): - Admin, Support, and more</p> <p>Effective permissions = Organization Role + User Role</p>"},{"location":"#real-time-monitoring","title":"\ud83d\udcca Real-Time Monitoring","text":"<ul> <li>Heartbeat tracking every 5 minutes</li> <li>Inventory collection every 6 hours</li> <li>Automatic change detection with diff analysis</li> <li>Status indicators: Active \ud83d\udfe2 / Inactive \ud83d\udfe1 / Unknown \u26aa / Deleted \ud83d\udd34</li> </ul>"},{"location":"#system-lifecycle","title":"\ud83d\udd04 System Lifecycle","text":"<pre><code>graph LR\n    A[Create System] --&gt; B[Receive secret]\n    B --&gt; C[Register System]\n    C --&gt; D[Get system_key]\n    D --&gt; E[Send Inventory]\n    D --&gt; F[Send Heartbeat]\n    E --&gt; G[Monitored]\n    F --&gt; G</code></pre>"},{"location":"#getting-help","title":"Getting Help","text":""},{"location":"#for-users","title":"For Users","text":"<ul> <li>Browse the User Guide sections</li> <li>Check the troubleshooting sections in each guide</li> <li>Contact your system administrator</li> </ul>"},{"location":"#for-developers_1","title":"For Developers","text":"<ul> <li>Read the component-specific READMEs</li> <li>Check the API documentation</li> <li>Review the architecture documentation in DESIGN.md</li> <li>Open an issue on GitHub</li> </ul>"},{"location":"#technology-stack","title":"Technology Stack","text":"<ul> <li>Backend: Go 1.24+ with Gin framework</li> <li>Database: PostgreSQL with migrations</li> <li>Cache: Redis for high-performance caching</li> <li>Identity: Logto for authentication and RBAC</li> <li>Frontend: Vue.js 3 (see separate repository)</li> </ul>"},{"location":"#version-information","title":"Version Information","text":"<p>Current version: 0.0.3 (Pre-production)</p> <p>This documentation is continuously updated. Last update: 2025-11-06</p> <ul> <li> <p> Ready to Start?</p> <p>Begin with the authentication guide to log in and explore My.</p> <p> Get Started</p> </li> <li> <p> Contribute</p> <p>My is open source. Contribute on GitHub!</p> <p> GitHub Repository</p> </li> </ul>"},{"location":"01-authentication/","title":"Getting Started - Authentication","text":"<p>Learn how to access My platform and manage your account.</p>"},{"location":"01-authentication/#first-login","title":"First Login","text":"<p>When your account is created by an administrator, you will receive a welcome email containing:</p> <ul> <li>Your username (email address)</li> <li>A temporary password</li> <li>A direct link to the login page</li> </ul>"},{"location":"01-authentication/#logging-in","title":"Logging In","text":"<ol> <li>Open the login URL provided in your welcome email</li> <li>Enter your email address</li> <li>Enter the temporary password</li> <li>Click Sign In</li> </ol>"},{"location":"01-authentication/#first-time-password-change","title":"First-Time Password Change","text":"<p>Upon first login with your temporary password, you will be required to:</p> <ol> <li>Enter your current (temporary) password</li> <li>Create a new secure password</li> <li>Confirm your new password</li> </ol> <p>Password Requirements:</p> <ul> <li>Minimum 8 characters</li> <li>At least one uppercase letter</li> <li>At least one lowercase letter</li> <li>At least one number</li> <li>At least one special character</li> </ul>"},{"location":"01-authentication/#managing-your-profile","title":"Managing Your Profile","text":""},{"location":"01-authentication/#change-your-password","title":"Change Your Password","text":"<p>To change your password at any time:</p> <ol> <li>Click on your profile icon in the top-right corner</li> <li>Select Account Settings</li> <li>Click Change Password</li> <li>Enter your current password</li> <li>Enter your new password</li> <li>Confirm your new password</li> <li>Click Save Changes</li> </ol>"},{"location":"01-authentication/#update-your-profile-information","title":"Update Your Profile Information","text":"<p>You can update your profile information:</p> <ol> <li>Click on your profile icon in the top-right corner</li> <li>Select Account Settings</li> <li>Update the following fields:</li> <li>Full Name: Your display name</li> <li>Email: Your email address (also your username)</li> <li>Phone Number: Optional contact number</li> <li>Click Save profile</li> </ol> <p>Note: Email changes may require re-authentication.</p>"},{"location":"01-authentication/#security-features","title":"Security Features","text":""},{"location":"01-authentication/#password-security","title":"Password Security","text":"<ul> <li>Your password is never stored in plain text</li> <li>Temporary passwords expire after first use</li> </ul>"},{"location":"01-authentication/#session-management","title":"Session Management","text":"<ul> <li>Sessions expire after 24 hours of inactivity</li> <li>Refresh tokens are valid for 7 days</li> <li>Logging out immediately invalidates your session</li> </ul>"},{"location":"01-authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"01-authentication/#forgot-password","title":"Forgot Password","text":"<p>If you forget your password:</p> <ol> <li>Use \"Forgot your password?\" link at the Login page</li> </ol>"},{"location":"01-authentication/#account-locked","title":"Account Locked","text":"<p>If your account is suspended:</p> <ul> <li>You will see an \"Account suspended\" error message</li> <li>Contact your system administrator to reactivate your account</li> <li>Only administrators can suspend/reactivate accounts</li> </ul>"},{"location":"01-authentication/#session-expired","title":"Session Expired","text":"<p>If your session expires:</p> <ol> <li>You will be automatically redirected to the login page</li> <li>Log in again with your credentials</li> <li>Your previous work is not saved during session expiration</li> </ol>"},{"location":"01-authentication/#multi-factor-authentication-mfa","title":"Multi-Factor Authentication (MFA)","text":"<p>Currently, My uses Logto as the identity provider. MFA settings are managed through Logto:</p> <ul> <li>Contact your administrator to enable MFA</li> <li>MFA can be configured organization-wide</li> <li>Supported methods: Authenticator apps, SMS (if configured)</li> </ul>"},{"location":"01-authentication/#next-steps","title":"Next Steps","text":"<p>Once logged in, you can:</p> <ul> <li>Manage Organizations (if you have the appropriate permissions)</li> <li>Manage Users (Admin or Support users)</li> <li>Manage Systems (Support users)</li> <li>View your dashboard and statistics</li> </ul>"},{"location":"01-authentication/#user-roles","title":"User Roles","text":"<p>Your permissions depend on your assigned roles:</p>"},{"location":"01-authentication/#organization-roles-business-hierarchy","title":"Organization Roles (Business Hierarchy)","text":"<ul> <li>Owner: Full platform access (Nethesis)</li> <li>Distributor: Can manage resellers and customers</li> <li>Reseller: Can manage customers</li> <li>Customer: Can view own organization data</li> </ul>"},{"location":"01-authentication/#user-roles-technical-capabilities","title":"User Roles (Technical Capabilities)","text":"<ul> <li>Super Admin: Full platform administration</li> <li>Admin: Organization administration, user management</li> <li>Support: System management, technical operations</li> <li>Backoffice: User management, backoffice operations</li> <li>Reader: Reader mode</li> </ul> <p>Your effective permissions are the combination of both role types.</p>"},{"location":"02-organizations/","title":"Organizations Management","text":"<p>Learn how to manage the business hierarchy in My platform.</p>"},{"location":"02-organizations/#understanding-organization-hierarchy","title":"Understanding Organization Hierarchy","text":"<p>My uses a hierarchical organization structure that reflects the business relationships:</p> <pre><code>Owner (Nethesis)\n    \u2193\nDistributors\n    \u2193\nResellers\n    \u2193\nCustomers\n</code></pre>"},{"location":"02-organizations/#organization-types","title":"Organization Types","text":"<p>Owner (Nethesis) - Top-level organization - Complete platform control - Can manage all distributors, resellers, and customers - Only one Owner organization exists</p> <p>Distributors - Created by Owner - Can manage their resellers and customers - Cannot see other distributors' data - Full control over their branch of the hierarchy</p> <p>Resellers - Created by Owner or Distributors - Can manage their customers - Cannot see other resellers' data - Work within their assigned distributor</p> <p>Customers - Created by Owner, Distributors, or Resellers - End-user organizations - Can only view their own data - Cannot create sub-organizations</p>"},{"location":"02-organizations/#permissions-by-organization-type","title":"Permissions by Organization Type","text":"Action Owner Distributor Reseller Customer Create Distributors \u2705 \u274c \u274c \u274c Manage Distributors \u2705 \u274c \u274c \u274c Create Resellers \u2705 \u2705 \u274c \u274c Manage Resellers \u2705 \u2705 (own) \u274c \u274c Create Customers \u2705 \u2705 \u2705 \u274c Manage Customers \u2705 \u2705 (own) \u2705 (own) \u274c View All Data \u2705 \u274c \u274c \u274c"},{"location":"02-organizations/#creating-organizations","title":"Creating Organizations","text":""},{"location":"02-organizations/#prerequisites","title":"Prerequisites","text":"<ul> <li>You must be logged in with appropriate permissions</li> <li>Owner users can create all organization types</li> <li>Distributor users can create resellers and customers</li> <li>Reseller users can create customers only</li> </ul>"},{"location":"02-organizations/#creating-a-distributor","title":"Creating a Distributor","text":"<p>Required Role: Owner organization member</p> <ol> <li>Navigate to Organizations &gt; Distributors</li> <li>Click Create distributor</li> <li>Fill in the form:</li> <li>Company name: Distributor company name (e.g., \"ACME Distribution Ltd\")</li> <li>Description (optional): Additional information</li> <li>VAT number: unique VAT identification for a company</li> <li>Click Create distributor</li> </ol> <p>Example: <pre><code>Name: ACME Distribution Europe\nDescription: Main distributor for European market\nVAT: 12345678901\n</code></pre></p>"},{"location":"02-organizations/#creating-a-reseller","title":"Creating a Reseller","text":"<p>Required Role: Owner or Distributor organization member</p> <ol> <li>Navigate to Organizations &gt; Resellers</li> <li>Click Create reseller</li> <li>Fill in the form:</li> <li>Company name: Reseller company name (e.g., \"ACME Distribution Ltd\")</li> <li>Description (optional): Additional information</li> <li>VAT number: unique VAT identification for a company</li> <li>Click Create reseller</li> </ol> <p>Example: <pre><code>Name: Tech Solutions Italia\nDescription: IT solutions provider for SMB market\nVAT: 12345678901\n</code></pre></p> <p>Note: If you're logged in as a Distributor, you can only create resellers under your own organization.</p>"},{"location":"02-organizations/#creating-a-customer","title":"Creating a Customer","text":"<p>Required Role: Owner, Distributor, or Reseller organization member</p> <ol> <li>Navigate to Organizations &gt; Customers</li> <li>Click Create customer</li> <li>Fill in the form:</li> <li>Company name: Customer company name (e.g., \"ACME Distribution Ltd\")</li> <li>Description (optional): Additional information</li> <li>VAT number: unique VAT identification for a company</li> <li>Click Create customer</li> </ol> <p>Example: <pre><code>Name: Pizza Express Milano\nDescription: Restaurant chain with 5 locations\nVAT: 12345678901\n</code></pre></p>"},{"location":"02-organizations/#viewing-organizations","title":"Viewing Organizations","text":""},{"location":"02-organizations/#organization-list","title":"Organization List","text":"<p>Each organization type has its own list view:</p> <ol> <li>Navigate to [Type] (Distributors/Resellers/Customers)</li> <li>View the list with the following information:</li> <li>Organization name</li> <li>Description</li> <li>Number of users</li> <li>Number of systems</li> <li>Creation date</li> </ol>"},{"location":"02-organizations/#filtering-and-search","title":"Filtering and Search","text":"<p>Use the filter options to find specific organizations:</p> <ul> <li>Search by name: Type in the search box</li> <li>Sort by: Name, description</li> </ul>"},{"location":"02-organizations/#organization-details","title":"Organization Details","text":"<p>Click on an organization to view detailed information:</p> <ul> <li>Overview: Name, description, creation date</li> <li>Users: All users belonging to this organization</li> <li>Systems: Systems associated with this organization (if applicable)</li> <li>Statistics: Usage metrics and activity</li> </ul>"},{"location":"02-organizations/#managing-organizations","title":"Managing Organizations","text":""},{"location":"02-organizations/#editing-organization-information","title":"Editing Organization Information","text":"<ol> <li>Navigate to the organization details page</li> <li>Click Edit</li> <li>Update the fields:</li> <li>Company name</li> <li>Description</li> <li>VAT</li> <li>Click Save [Type]</li> </ol>"},{"location":"02-organizations/#deleting-organizations","title":"Deleting Organizations","text":"<p>\u26a0\ufe0f Warning: Deleting an organization is permanent and will: - Remove all users in that organization - Delete all systems associated with it - Remove all child organizations (cascade delete)</p> <p>To delete an organization:</p> <ol> <li>Navigate to the organization page</li> <li>Click Delete (use the kebab men\u00f9)</li> <li>Click Delete</li> </ol>"},{"location":"02-organizations/#suspending-organizations","title":"Suspending Organizations","text":"<p>Instead of deleting, you can suspend an organization:</p> <ol> <li>Navigate to the organization page</li> <li>Click Suspend</li> <li>Confirm the action</li> </ol> <p>Effects of suspension: - Users cannot log in - Systems cannot send data - Can be reactivated later</p> <p>To reactivate: 1. Filter by \"Suspended\" status 2. Select the organization 3. Click Reactivate</p>"},{"location":"02-organizations/#organization-statistics","title":"Organization Statistics","text":""},{"location":"02-organizations/#viewing-statistics","title":"Viewing Statistics","text":"<p>Navigate to Dashboard to see:</p> <ul> <li>Distributors Overview:</li> <li>Total number of distributors</li> <li>Active vs. suspended</li> <li> <p>Trend graph (last 30/60/90 days)</p> </li> <li> <p>Resellers Overview:</p> </li> <li>Total resellers per distributor</li> <li>Active vs. suspended</li> <li> <p>Trend graph</p> </li> <li> <p>Customers Overview:</p> </li> <li>Total customers</li> <li>Distribution by reseller/distributor</li> <li>Growth trend</li> </ul>"},{"location":"02-organizations/#exporting-data","title":"Exporting Data","text":"<p>Export organization data for reporting:</p> <ol> <li>Navigate to the organization list</li> <li>Apply filters if needed</li> <li>Click Export</li> <li>Choose format: CSV or PDF</li> <li>Download the file</li> </ol>"},{"location":"02-organizations/#best-practices","title":"Best Practices","text":""},{"location":"02-organizations/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Use clear, descriptive names</li> <li>Include geographical information if relevant (e.g., \"ACME Europe\", \"Tech Solutions Italia\")</li> <li>Avoid special characters in names</li> <li>Keep names concise but meaningful</li> </ul>"},{"location":"02-organizations/#organization-structure","title":"Organization Structure","text":"<ul> <li>Plan your hierarchy before creating organizations</li> <li>Keep the structure simple and logical</li> <li>Avoid creating unnecessary intermediate levels</li> <li>Document the business relationships</li> </ul>"},{"location":"02-organizations/#access-control","title":"Access Control","text":"<ul> <li>Assign users to the correct organization</li> <li>Review organization membership regularly</li> <li>Use descriptive organization names for clarity</li> <li>Keep contact information up to date</li> </ul>"},{"location":"02-organizations/#troubleshooting","title":"Troubleshooting","text":""},{"location":"02-organizations/#cannot-create-organization","title":"Cannot Create Organization","text":"<p>Problem: \"Access denied\" error when creating an organization</p> <p>Solutions: - Verify you have the correct role (Owner/Distributor/Reseller) - Check you're trying to create the correct organization type - Ensure your organization membership is correct - Contact your administrator</p>"},{"location":"02-organizations/#cannot-see-organization","title":"Cannot See Organization","text":"<p>Problem: Expected organization not visible in the list</p> <p>Solutions: - Check if organization is suspended (use filters) - Verify you have permission to view that organization type - Ensure you're viewing the correct organization level - Check if the organization belongs to your hierarchy branch</p>"},{"location":"02-organizations/#cannot-delete-organization","title":"Cannot Delete Organization","text":"<p>Problem: Delete button is disabled or shows error</p> <p>Solutions: - Remove all systems from the organization first - Delete all child organizations first - Check if you have permission to delete - Ensure the organization is not the Owner organization</p>"},{"location":"02-organizations/#next-steps","title":"Next Steps","text":"<p>After creating organizations:</p> <ul> <li>Create users and assign them to organizations</li> <li>Create systems associated with customer organizations</li> <li>Set up appropriate permissions for each user</li> </ul>"},{"location":"02-organizations/#related-documentation","title":"Related Documentation","text":"<ul> <li>Users Management</li> <li>Systems Management</li> </ul>"},{"location":"03-users/","title":"Users Management","text":"<p>Learn how to create and manage users in My platform.</p>"},{"location":"03-users/#understanding-user-roles","title":"Understanding User Roles","text":"<p>My uses a dual-role system combining business hierarchy with technical capabilities.</p>"},{"location":"03-users/#organization-roles-business-hierarchy","title":"Organization Roles (Business Hierarchy)","text":"<p>Automatically inherited from user's organization:</p> <ul> <li>Owner: Complete platform access (Nethesis only)</li> <li>Distributor: Manages resellers and customers</li> <li>Reseller: Manages customers</li> <li>Customer: Views own organization data</li> </ul>"},{"location":"03-users/#user-roles-technical-capabilities","title":"User Roles (Technical Capabilities)","text":"<p>Manually assigned to users based on their job function:</p> <ul> <li>Super Admin: Full platform administration with impersonation</li> <li>All Admin capabilities</li> <li>User impersonation for troubleshooting</li> <li>Advanced system operations</li> <li> <p>Complete platform control</p> </li> <li> <p>Admin: Platform administration</p> </li> <li>User management</li> <li>Organization management</li> <li>System configuration</li> <li> <p>Dangerous operations (delete, suspend)</p> </li> <li> <p>Backoffice: Administrative operations and reporting</p> </li> <li>User and organization viewing</li> <li>System monitoring and reporting</li> <li>Analytics and statistics</li> <li> <p>No destructive operations</p> </li> <li> <p>Support: Technical operations</p> </li> <li>System management</li> <li>Inventory viewing</li> <li>Heartbeat monitoring</li> <li> <p>Standard operations</p> </li> <li> <p>Reader: Read-only access</p> </li> <li>View users and organizations</li> <li>View systems and status</li> <li>View inventory and heartbeat</li> <li>No modification capabilities</li> </ul>"},{"location":"03-users/#combined-permissions","title":"Combined Permissions","text":"<p>A user's final permissions are the combination of both role types:</p> <p>Example 1: <pre><code>Organization: Customer (Pizza Express)\nUser Role: Admin\n\u2192 Can manage users within Pizza Express organization only\n\u2192 Can manage systems for Pizza Express only\n</code></pre></p> <p>Example 2: <pre><code>Organization: Distributor (ACME Distribution)\nUser Role: Support\n\u2192 Can view resellers and customers under ACME\n\u2192 Can manage systems for all customers under ACME\n\u2192 Cannot manage users (requires Admin role)\n</code></pre></p>"},{"location":"03-users/#creating-users","title":"Creating Users","text":""},{"location":"03-users/#prerequisites","title":"Prerequisites","text":"<ul> <li>You must have Admin role</li> <li>You can only create users for organizations you can manage</li> <li>Valid email address for the new user</li> </ul>"},{"location":"03-users/#create-a-new-user","title":"Create a New User","text":"<ol> <li>Navigate to Users</li> <li>Click Create user</li> <li>Fill in the form:</li> <li>Name: User's display name (e.g., \"Mario Rossi\")</li> <li>Email: User's email address (will be their username)</li> <li>Organization: Select the organization</li> <li>Roles: Select one or more roles (Super Admin, Admin, Backoffice, Support, Reader)</li> <li>Phone Number (optional): Contact phone</li> <li>Click Create user</li> </ol> <p>Example: <pre><code>Full Name: Mario Rossi\nEmail: mario.rossi@techsolutions.it\nOrganization: Tech Solutions Italia (Reseller)\nUser Roles: Admin, Support\nPhone: +39 02 1234567\n</code></pre></p>"},{"location":"03-users/#what-happens-after-creation","title":"What Happens After Creation","text":"<ol> <li>User account is created in Logto</li> <li>A temporary password is automatically generated</li> <li>Welcome email is sent to the user containing:</li> <li>Temporary password</li> <li>Login URL</li> <li>Password change instructions</li> <li>User must change password on first login</li> </ol> <p>\u26a0\ufe0f Important: The temporary password is shown only once during creation. Make sure the user receives the welcome email.</p>"},{"location":"03-users/#managing-users","title":"Managing Users","text":""},{"location":"03-users/#viewing-user-list","title":"Viewing User List","text":"<p>Navigate to Users to see:</p> <ul> <li>User name and email</li> <li>Organization</li> <li>User roles</li> <li>Organization role (derived from organization)</li> <li>Status (active/suspended)</li> </ul>"},{"location":"03-users/#filtering-and-search","title":"Filtering and Search","text":"<p>Use filters to find specific users:</p> <ul> <li>Search by name or email: Type in the search box</li> <li>Search by organization: Select one or more organizations</li> <li>Search by role: Super Admin, Admin, Backoffice, Support, Reader</li> <li>Sort by: Name, email, organization</li> </ul>"},{"location":"03-users/#user-details","title":"User Details","text":"<p>Click on a user to view detailed information:</p> <ul> <li>Profile Information:</li> <li>Full name</li> <li>Email address</li> <li>Phone number</li> <li> <p>Profile picture (if configured via Logto)</p> </li> <li> <p>Organization Membership:</p> </li> <li>Primary organization</li> <li> <p>Organization role (Owner/Distributor/Reseller/Customer)</p> </li> <li> <p>Roles and Permissions:</p> </li> <li>Assigned user roles (Admin, Support)</li> <li> <p>Effective permissions list</p> </li> <li> <p>Activity:</p> </li> <li>Last login date and time</li> <li>Account creation date</li> <li> <p>Last password change</p> </li> <li> <p>Status:</p> </li> <li>Active or suspended</li> <li>Suspension reason (if applicable)</li> </ul>"},{"location":"03-users/#editing-users","title":"Editing Users","text":""},{"location":"03-users/#update-user-information","title":"Update User Information","text":"<ol> <li>Navigate to the user details page</li> <li>Click Edit</li> <li>Update the fields:</li> <li>Name</li> <li>Email address</li> <li>Organization</li> <li>Roles</li> <li>Phone number</li> <li>Click Save user</li> </ol> <p>Note: - At least one role should be selected - You cannot edit your own account through this interface (use Profile Settings instead)</p>"},{"location":"03-users/#reset-user-password","title":"Reset User Password","text":"<p>As an Admin, you can reset a user's password:</p> <ol> <li>Navigate to the user page</li> <li>Click Reset Password (using kebab men\u00f9)</li> <li>Confirm the action</li> <li>A new temporary password is generated</li> <li>Copy the password and send it to the user</li> </ol> <p>Use Cases: - User forgot their password - Security incident requiring password reset - Account recovery</p>"},{"location":"03-users/#user-status-management","title":"User Status Management","text":""},{"location":"03-users/#suspending-a-user","title":"Suspending a User","text":"<p>Temporarily disable a user account:</p> <ol> <li>Navigate to the user page</li> <li>Click Suspend (using kebab men\u00f9)</li> <li>Click Suspend</li> </ol> <p>Effects of suspension: - User cannot log in - Active sessions are immediately invalidated - User tokens are blacklisted - User appears as \"Suspended\" in lists</p>"},{"location":"03-users/#reactivating-a-user","title":"Reactivating a User","text":"<p>Re-enable a suspended account:</p> <ol> <li>Filter users by \"Suspended\" status</li> <li>Select the suspended user</li> <li>Click Reactivate (using kebab men\u00f9)</li> <li>Confirm the action</li> </ol> <p>Effects of reactivation: - User can log in again - User must use their existing password - Previous permissions are restored</p>"},{"location":"03-users/#deleting-a-user","title":"Deleting a User","text":"<p>\u26a0\ufe0f Warning: User deletion is permanent and cannot be undone.</p> <p>To delete a user:</p> <ol> <li>Navigate to the user details page</li> <li>Click Delete (using kebab men\u00f9)</li> <li>Click Delete</li> </ol> <p>Effects of deletion: - User account is permanently removed from Logto - All audit logs are preserved - Systems created by this user remain</p> <p>Prerequisites: - You cannot delete your own account - User must be suspended first (safety measure) - You must have Admin role</p>"},{"location":"03-users/#self-service-features","title":"Self-Service Features","text":"<p>Users can manage some aspects of their own account:</p>"},{"location":"03-users/#change-own-password","title":"Change Own Password","text":"<ol> <li>Click profile icon &gt; Profile Settings</li> <li>Click Change Password</li> <li>Enter current password</li> <li>Enter new password (twice)</li> <li>Click Save</li> </ol>"},{"location":"03-users/#update-own-profile","title":"Update Own Profile","text":"<ol> <li>Click profile icon &gt; Profile Settings</li> <li>Update:</li> <li>Name</li> <li>Email address</li> <li>Phone number</li> <li>Click Save</li> </ol> <p>Note: Email changes may require re-authentication.</p>"},{"location":"03-users/#permissions-reference","title":"Permissions Reference","text":""},{"location":"03-users/#super-admin-role-permissions","title":"Super Admin Role Permissions","text":"<p>\u2705 Can perform: - All Admin capabilities - User impersonation for troubleshooting - Advanced system operations - Platform-wide configuration - Complete audit trail access - Emergency operations</p> <p>\u274c Cannot perform: - Modify own account status - Delete own account - Bypass audit logging</p>"},{"location":"03-users/#admin-role-permissions","title":"Admin Role Permissions","text":"<p>\u2705 Can perform: - Create users - Edit users - Reset user passwords - Suspend/reactivate users - Delete users (with restrictions) - Manage organizations (based on hierarchy) - View all audit logs - Configure platform settings</p> <p>\u274c Cannot perform: - User impersonation - Modify own account status - Delete own account - Bypass hierarchical restrictions</p>"},{"location":"03-users/#backoffice-role-permissions","title":"Backoffice Role Permissions","text":"<p>\u2705 Can perform: - View users and organizations - View systems and inventory - Generate reports and analytics - View statistics and dashboards - Export data - View audit logs</p> <p>\u274c Cannot perform: - Create or edit users - Manage organizations - Create or edit systems - Delete any resources - Suspend users - Reset passwords</p>"},{"location":"03-users/#support-role-permissions","title":"Support Role Permissions","text":"<p>\u2705 Can perform: - Create systems - View systems - Edit systems - Regenerate system secrets - View inventory - View heartbeat status - View system statistics</p> <p>\u274c Cannot perform: - Manage users - Manage organizations - Delete systems - Access dangerous operations</p>"},{"location":"03-users/#reader-role-permissions","title":"Reader Role Permissions","text":"<p>\u2705 Can perform: - View users (basic information) - View organizations - View systems and status - View inventory data - View heartbeat status - View basic statistics</p> <p>\u274c Cannot perform: - Create, edit, or delete any resources - Access sensitive user data - View audit logs - Generate reports - Export data</p>"},{"location":"03-users/#hierarchical-restrictions","title":"Hierarchical Restrictions","text":"<p>Users can only manage other users within their organizational scope:</p> <p>Owner users: - Can manage all users across all organizations</p> <p>Distributor users: - Can manage users in their resellers and customers - Cannot manage users in other distributors</p> <p>Reseller users: - Can manage users in their customers only - Cannot manage users in their distributor or other resellers</p> <p>Customer users: - Can manage users in their own organization only</p>"},{"location":"03-users/#user-statistics","title":"User Statistics","text":""},{"location":"03-users/#dashboard-metrics","title":"Dashboard Metrics","text":"<p>Navigate to Dashboard to view:</p> <ul> <li>Total Users: Count across all accessible organizations</li> <li>Active Users: Users who logged in recently</li> <li>Users by Organization: Distribution chart</li> <li>Users by Role: Super Admin, Admin, Backoffice, Support, Reader count</li> <li>Growth Trend: User creation trend (last 30/60/90 days)</li> </ul>"},{"location":"03-users/#user-report","title":"User Report","text":"<p>Generate reports:</p> <ol> <li>Navigate to Users</li> <li>Choose filters (organization, role, status)</li> <li>Click Actions &gt; Export</li> <li>Export as CSV or PDF</li> </ol>"},{"location":"03-users/#best-practices","title":"Best Practices","text":""},{"location":"03-users/#user-account-management","title":"User Account Management","text":"<ul> <li>Create users only when needed</li> <li>Use descriptive full names</li> <li>Always verify email addresses</li> <li>Document user responsibilities</li> <li>Review user accounts regularly</li> <li>Remove inactive users promptly</li> </ul>"},{"location":"03-users/#role-assignment","title":"Role Assignment","text":"<ul> <li>Assign minimal required roles (principle of least privilege)</li> <li>Document why users have specific roles</li> <li>Review role assignments quarterly</li> <li>Use Super Admin role only for platform administrators</li> <li>Use Admin role sparingly for user management needs</li> <li>Use Backoffice role for reporting and analytics personnel</li> <li>Use Support role for most technical operations</li> <li>Use Reader role for view-only access (auditors, stakeholders)</li> </ul>"},{"location":"03-users/#security","title":"Security","text":"<ul> <li>Force password changes for security incidents</li> <li>Suspend users immediately upon termination</li> <li>Review active sessions regularly</li> <li>Monitor failed login attempts</li> <li>Keep contact information up to date</li> </ul>"},{"location":"03-users/#organization-assignment","title":"Organization Assignment","text":"<ul> <li>Assign users to their correct organization</li> <li>Verify organizational hierarchy</li> <li>Update organization membership when structure changes</li> <li>Don't create users in wrong organizations</li> </ul>"},{"location":"03-users/#troubleshooting","title":"Troubleshooting","text":""},{"location":"03-users/#user-cannot-log-in","title":"User Cannot Log In","text":"<p>Problem: User reports they cannot access the platform</p> <p>Solutions: 1. Verify user account is not suspended 2. Check if temporary password was changed 3. Confirm email address is correct 4. Reset password if needed 5. Check Logto service status</p>"},{"location":"03-users/#user-has-wrong-permissions","title":"User Has Wrong Permissions","text":"<p>Problem: User cannot access expected features</p> <p>Solutions: 1. Verify user roles are correctly assigned 2. Check organization membership is correct 3. Confirm organizational hierarchy is correct 4. Review combined permissions (org role + user role) 5. Check if recent role changes have propagated</p>"},{"location":"03-users/#cannot-create-user","title":"Cannot Create User","text":"<p>Problem: \"Access denied\" when creating user</p> <p>Solutions: 1. Verify you have Admin role 2. Check target organization is in your hierarchy 3. Confirm email address is not already used 4. Ensure organization is not suspended</p>"},{"location":"03-users/#welcome-email-not-received","title":"Welcome Email Not Received","text":"<p>Problem: New user didn't receive welcome email</p> <p>Solutions: 1. Check user's spam folder 2. Verify email address is correct 3. Check SMTP configuration (admin only) 4. Manually share temporary password securely 5. Reset password to send new email</p>"},{"location":"03-users/#next-steps","title":"Next Steps","text":"<p>After creating users:</p> <ul> <li>Create systems for customer organizations</li> <li>Configure user permissions appropriately</li> <li>Train users on platform usage</li> <li>Set up monitoring and alerts</li> </ul>"},{"location":"03-users/#related-documentation","title":"Related Documentation","text":"<ul> <li>Authentication Guide</li> <li>Organizations Management</li> <li>Systems Management</li> </ul>"},{"location":"04-systems/","title":"Systems Management","text":"<p>Learn how to create and manage systems in My platform.</p>"},{"location":"04-systems/#understanding-systems","title":"Understanding Systems","text":"<p>A system in My represents a managed server or device (NethServer or NethSecurity) that:</p> <ul> <li>Belongs to an organization</li> <li>Sends inventory data automatically</li> <li>Sends heartbeat signals to indicate it's active</li> <li>Can be monitored and managed remotely</li> </ul>"},{"location":"04-systems/#system-lifecycle","title":"System Lifecycle","text":"<pre><code>1. Created by Admin/Support \u2192 receives system_secret\n2. Not registered yet \u2192 system_key is hidden\n3. External system registers \u2192 system_key becomes visible\n4. System sends inventory and heartbeat \u2192 monitored status\n</code></pre>"},{"location":"04-systems/#system-status","title":"System Status","text":"<ul> <li>Unknown: Default status, no inventory received yet</li> <li>Active: System is actively sending heartbeat (&lt; 15 minutes)</li> <li>Inactive: System stopped sending heartbeat (&gt; 15 minutes)</li> <li>Deleted: System has been soft-deleted</li> </ul>"},{"location":"04-systems/#creating-systems","title":"Creating Systems","text":""},{"location":"04-systems/#prerequisites","title":"Prerequisites","text":"<ul> <li>You must have Support or Admin role</li> <li>You need a customer organization to associate the system with</li> <li>System will be created in \"not registered\" state</li> </ul>"},{"location":"04-systems/#create-a-new-system","title":"Create a New System","text":"<ol> <li>Navigate to Systems</li> <li>Click Create system</li> <li>Fill in the form:</li> <li>Name: Descriptive name for the system (e.g., \"Production Server Milan\")</li> <li>Organization: Select the customer organization</li> <li>Notes (optional): Additional information</li> <li>Click Create system</li> </ol> <p>Example: <pre><code>Name: Production Web Server Milano\nOrganization: Pizza Express Milano (Customer)\nNotes: Main production server for Milan locations\n</code></pre></p>"},{"location":"04-systems/#system-secret","title":"System Secret","text":"<p>After creation, you will see:</p> <pre><code>{\n  \"id\": \"sys_abc123\",\n  \"name\": \"Production Web Server Milano\",\n  \"system_key\": \"\",  // \u2190 HIDDEN until registered\n  \"system_secret\": \"my_a1b2c3.k1l2m3...\",  // \u2190 SAVE THIS! Only shown once\n  \"status\": \"unknown\",\n  \"registered_at\": null,\n  \"organization\": \"Pizza Express Milano\"\n}\n</code></pre> <p>\u26a0\ufe0f CRITICAL: - The <code>system_secret</code> is shown only once during creation - Copy and save it immediately - You will need it to register the system - If lost, you must regenerate it (invalidates previous secret)</p>"},{"location":"04-systems/#viewing-systems","title":"Viewing Systems","text":""},{"location":"04-systems/#system-list","title":"System List","text":"<p>Navigate to Systems to see:</p> <ul> <li>System name</li> <li>Type (ns8, nsec, etc.)</li> <li>Version</li> <li>FQDN and IP addresses</li> <li>Organization</li> <li>Created by</li> <li>Status (unknown, online, offline)</li> <li>Registration status</li> </ul>"},{"location":"04-systems/#filtering-and-search","title":"Filtering and Search","text":"<p>Use filters to find specific systems:</p> <ul> <li>Search: By name or system_key</li> <li>Product: Filter by type (NethServer or NethSecurity)</li> <li>Version: Filter by system version</li> <li>Organization: Filter by customer organization</li> <li>Created By: Filter by user who created the system</li> <li>Status: unknown, online, offline, deleted</li> <li>Sort By: Name, version, FQDN/IP address, Organization, Created By, Status</li> </ul>"},{"location":"04-systems/#system-details","title":"System Details","text":"<p>Click on a system to view comprehensive information:</p>"},{"location":"04-systems/#overview-tab","title":"Overview Tab","text":"<ul> <li>Basic Information:</li> <li>System name</li> <li>System type (auto-detected)</li> <li>Status</li> <li>Version</li> <li> <p>Registration timestamp</p> </li> <li> <p>Network Information:</p> </li> <li>FQDN (Fully Qualified Domain Name)</li> <li>IPv4 address</li> <li> <p>IPv6 address</p> </li> <li> <p>Authentication:</p> </li> <li>System key (visible only after registration)</li> <li>Registration status</li> <li> <p>Last authentication time</p> </li> <li> <p>Organization:</p> </li> <li>Customer name</li> <li>Organization type</li> <li> <p>Organization name</p> </li> <li> <p>Heartbeat Status:</p> </li> <li>Current status (active/inactive/unknown)</li> <li>Last heartbeat timestamp</li> <li> <p>Last inventory timestamp</p> </li> <li> <p>Audit Trail:</p> </li> <li>Created by (user name and email)</li> <li>Creation date</li> <li>Deletion date (if soft-deleted)</li> </ul>"},{"location":"04-systems/#inventory-tab","title":"Inventory Tab","text":"<p>View detailed system inventory:</p> <ul> <li>Latest Inventory: Most recent inventory snapshot</li> <li>Inventory History: All historical inventories with pagination</li> <li>Changes: List of detected changes between inventories</li> <li>Diff View: Detailed comparison between inventory versions</li> </ul> <p>See Inventory and Heartbeat for details.</p>"},{"location":"04-systems/#managing-systems","title":"Managing Systems","text":""},{"location":"04-systems/#editing-system-information","title":"Editing System Information","text":"<ol> <li>Navigate to the system page</li> <li>Click Edit</li> <li>Update the fields:</li> <li>Name</li> <li>Organization</li> <li>Notes</li> <li>Click Save systen</li> </ol>"},{"location":"04-systems/#regenerating-system-secret","title":"Regenerating System Secret","text":"<p>If the <code>system_secret</code> is compromised or lost:</p> <ol> <li>Navigate to the system page</li> <li>Click Regenerate Secret (using kebab men\u00f9)</li> <li>Confirm the action</li> <li>Copy the new secret immediately (shown only once)</li> <li>Update the secret on the external system</li> </ol> <p>\u26a0\ufe0f Warning: - Old secret is invalidated immediately - System cannot authenticate until new secret is configured - All inventory and heartbeat will fail until updated - System remains registered (registered_at unchanged)</p> <p>When to regenerate: - Secret is compromised or leaked - Secret is lost (for registered systems) - Security audit requires credential rotation - Migrating system to new hardware</p>"},{"location":"04-systems/#soft-delete","title":"Soft Delete","text":"<p>Soft delete marks a system as deleted without removing data:</p> <ol> <li>Navigate to the system details page</li> <li>Click Delete (using kebab men\u00f9)</li> <li>Confirm the action</li> </ol> <p>Effects: - System marked as \"deleted\" - Cannot send inventory or heartbeat - Hidden from normal views - Can be restored if needed - All historical data is preserved</p> <p>To view deleted systems: 1. Apply filter: Status = \"deleted\" 2. Select the deleted system 3. Click Restore to undelete</p>"},{"location":"04-systems/#permanent-delete","title":"Permanent Delete","text":"<p>\u26a0\ufe0f Warning: This operation is irreversible!</p> <p>To permanently delete: 1. Soft delete the system first 2. Navigate to deleted systems view 3. Select the system 4. Click Permanent Delete 5. Type system name to confirm 6. Click Delete</p> <p>This will remove: - System record - All inventory history - All heartbeat records - All change detection data</p> <p>This will preserve: - Audit logs - User activity logs</p>"},{"location":"04-systems/#system-registration","title":"System Registration","text":"<p>After creating a system, the external system must register itself using the <code>system_secret</code>.</p>"},{"location":"04-systems/#registration-flow","title":"Registration Flow","text":"<ol> <li>Admin creates system \u2192 receives <code>system_secret</code></li> <li>Admin configures external system with the secret</li> <li>External system calls registration API with secret</li> <li>Platform validates and returns <code>system_key</code></li> <li>External system stores both credentials for future use</li> </ol> <p>See System Registration for detailed instructions.</p>"},{"location":"04-systems/#registration-status","title":"Registration Status","text":"<p>Before Registration: <pre><code>{\n  \"system_key\": \"\",  // Hidden\n  \"registered_at\": null,\n  \"status\": \"unknown\"\n}\n</code></pre></p> <p>After Registration: <pre><code>{\n  \"system_key\": \"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\",  // Now visible\n  \"registered_at\": \"2025-11-06T10:30:00Z\",\n  \"status\": \"unknown\"  // Will update after first inventory\n}\n</code></pre></p>"},{"location":"04-systems/#system-monitoring","title":"System Monitoring","text":""},{"location":"04-systems/#dashboard-overview","title":"Dashboard Overview","text":"<p>Navigate to Dashboard to see:</p> <ul> <li>Total Systems: Count across accessible organizations</li> <li>System Status: Distribution (unknown/online/offline)</li> <li>Heartbeat Status: Active/inactive/unknown counts</li> <li>Recent Changes: Latest inventory changes</li> <li>Alerts: Systems with issues</li> </ul>"},{"location":"04-systems/#exporting-system-data","title":"Exporting System Data","text":"<p>Export system information for reporting:</p> <ol> <li>Navigate to Systems</li> <li>Apply filters if needed</li> <li>Click Actions &gt; Export</li> <li>Choose format:</li> <li>CSV or PDF</li> <li>Download the file</li> </ol>"},{"location":"04-systems/#best-practices","title":"Best Practices","text":""},{"location":"04-systems/#system-naming","title":"System Naming","text":"<ul> <li>Use descriptive, consistent names</li> <li>Include location if relevant: \"Server Milano Nord\"</li> <li>Include purpose: \"Production Web\", \"Backup Server\"</li> <li>Avoid special characters</li> <li>Keep names under 50 characters</li> </ul>"},{"location":"04-systems/#organization","title":"Organization","text":"<ul> <li>Group systems by customer</li> <li>Use custom data for categorization</li> <li>Tag systems with environment (prod/staging/dev)</li> <li>Document system purpose in notes</li> </ul>"},{"location":"04-systems/#security","title":"Security","text":"<ul> <li>Store secrets securely (password manager, vault)</li> <li>Never share secrets via email</li> <li>Revoke secrets immediately if compromised</li> <li>Monitor failed authentication attempts</li> </ul>"},{"location":"04-systems/#monitoring","title":"Monitoring","text":"<ul> <li>Check heartbeat status daily</li> <li>Review inventory changes weekly</li> <li>Set up alerts for critical systems</li> <li>Monitor system versions for updates</li> </ul>"},{"location":"04-systems/#troubleshooting","title":"Troubleshooting","text":""},{"location":"04-systems/#system-not-appearing-in-list","title":"System Not Appearing in List","text":"<p>Problem: Expected system is not visible</p> <p>Solutions: 1. Check if system belongs to accessible organization 2. Verify system is not soft-deleted (check deleted filter) 3. Confirm you have Support or Admin role 4. Check if filters are applied 5. Refresh the page</p>"},{"location":"04-systems/#cannot-register-system","title":"Cannot Register System","text":"<p>Problem: Registration fails with \"invalid system secret\"</p> <p>Solutions: 1. Verify secret was copied correctly (no extra spaces) 2. Check secret hasn't been regenerated 3. Confirm system is not deleted 4. Ensure system is not already registered 5. See System Registration Troubleshooting</p>"},{"location":"04-systems/#system-shows-as-inactive","title":"System Shows as \"Inactive\"","text":"<p>Problem: System heartbeat status is \"inactive\" (yellow)</p> <p>Solutions: 1. Check if system is actually running 2. Verify network connectivity 3. Check system logs for errors 4. Confirm credentials are correct 5. Test heartbeat endpoint manually 6. See Inventory and Heartbeat</p>"},{"location":"04-systems/#system_key-is-hidden","title":"System_key is Hidden","text":"<p>Problem: Cannot see system_key field</p> <p>Explanation: - system_key is hidden until system is registered - This is expected behavior for unregistered systems - Register the system first to reveal system_key</p> <p>Solution: 1. Use system_secret to register the system 2. After registration, system_key becomes visible 3. See System Registration</p>"},{"location":"04-systems/#lost-system-secret","title":"Lost System Secret","text":"<p>Problem: System secret was not saved during creation</p> <p>Solutions: 1. Regenerate the system secret 2. Configure external system with new secret 3. System must re-register if already registered 4. Old secret becomes invalid immediately</p>"},{"location":"04-systems/#system-type-not-detected","title":"System Type Not Detected","text":"<p>Problem: System type shows as null or unknown</p> <p>Explanation: - System type is auto-detected from first inventory - Shows null until first inventory is received</p> <p>Solution: 1. Ensure system is registered 2. Send first inventory from external system 3. Type will be detected automatically 4. See Inventory and Heartbeat</p>"},{"location":"04-systems/#next-steps","title":"Next Steps","text":"<p>After creating systems:</p> <ul> <li>Register external systems using system_secret</li> <li>Configure inventory collection</li> <li>Set up monitoring and alerts</li> <li>Review system statistics regularly</li> </ul>"},{"location":"04-systems/#related-documentation","title":"Related Documentation","text":"<ul> <li>System Registration</li> <li>Inventory and Heartbeat</li> <li>Organizations Management</li> </ul>"},{"location":"05-system-registration/","title":"System Registration","text":"<p>Learn how external systems register with My platform to enable monitoring and management.</p>"},{"location":"05-system-registration/#overview","title":"Overview","text":"<p>System registration is the process by which an external system (NethServer, NethSecurity, etc.) authenticates itself with My and receives its permanent credentials.</p>"},{"location":"05-system-registration/#why-registration-is-needed","title":"Why Registration is Needed","text":"<ul> <li>Security: Validates the system before allowing data transmission</li> <li>Authentication: Establishes long-term credentials</li> <li>Tracking: Records when a system first connected</li> <li>Visibility: Makes system_key visible to administrators</li> </ul>"},{"location":"05-system-registration/#registration-flow","title":"Registration Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502             \u2502  1. Create system                   \u2502              \u2502\n\u2502    Admin    \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500&gt; \u2502      My      \u2502\n\u2502             \u2502  \u2190 Returns system_secret (1 time)   \u2502   Platform   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                           \u2502\n                                                           \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                            \u2502\n\u2502  External   \u2502  2. Configure system_secret                \u2502\n\u2502   System    \u2502&lt;\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502 (NethServer)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502\n      \u2502  3. Call registration API\n      \u2502     POST /api/systems/register\n      \u2502     { \"system_secret\": \"my_...\" }\n      \u2502\n      v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      My      \u2502  4. Validate secret\n\u2502   Platform   \u2502     \u2713 Format correct\n\u2502              \u2502     \u2713 Public part exists\n\u2502              \u2502     \u2713 Secret part verified (Argon2id)\n\u2502              \u2502     \u2713 Not deleted\n\u2502              \u2502     \u2713 Not already registered\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502\n      \u2502  5. Return system_key\n      v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  External   \u2502  6. Store credentials:\n\u2502   System    \u2502     - system_key (username)\n\u2502             \u2502     - system_secret (password)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502\n      \u2502  7. Ready for inventory &amp; heartbeat!\n      v\n</code></pre>"},{"location":"05-system-registration/#understanding-credentials","title":"Understanding Credentials","text":""},{"location":"05-system-registration/#system_secret-created-at-system-creation","title":"system_secret (Created at System Creation)","text":"<p>Format: <code>my_&lt;public_part&gt;.&lt;secret_part&gt;</code></p> <p>Example: <code>my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0</code></p> <p>Components: - Prefix: <code>my_</code> (identifies token type) - Public part: 20 hex characters (for database lookup) - Separator: <code>.</code> (dot) - Secret part: 40 hex characters (hashed with Argon2id)</p> <p>Characteristics: - Shown only once during system creation - Cannot be retrieved later (regeneration creates new one) - Used for registration (one-time) - Used for all future authentication (inventory, heartbeat)</p>"},{"location":"05-system-registration/#system_key-received-at-registration","title":"system_key (Received at Registration)","text":"<p>Format: <code>NOC-&lt;random_string&gt;</code></p> <p>Example: <code>NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE</code></p> <p>Characteristics: - Generated during system creation - Hidden until system registers - Visible after successful registration - Used as username for HTTP Basic Auth - Never changes (even if secret is regenerated)</p>"},{"location":"05-system-registration/#registration-process","title":"Registration Process","text":""},{"location":"05-system-registration/#step-1-admin-creates-system","title":"Step 1: Admin Creates System","text":"<p>See Systems Management for details.</p> <p>After creation, save the <code>system_secret</code>: <pre><code>{\n  \"system_secret\": \"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n}\n</code></pre></p>"},{"location":"05-system-registration/#step-2-configure-external-system","title":"Step 2: Configure External System","text":"<p>Configure the external system with the <code>system_secret</code>. The exact method depends on the system type:</p>"},{"location":"05-system-registration/#for-nethservernethsecurity","title":"For NethServer/NethSecurity:","text":"<ol> <li>Log in to the system admin interface</li> <li>Navigate to Settings &gt; Subscription</li> <li>Paste the <code>system_secret</code></li> <li>Click Register</li> </ol>"},{"location":"05-system-registration/#for-custom-systems-api","title":"For Custom Systems (API):","text":"<p>Store the secret securely in your application:</p> <p>Configuration file example: <pre><code># /etc/my/config.conf\nMY_PLATFORM_URL=https://my.nethesis.it\nMY_SYSTEM_SECRET=my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\n</code></pre></p> <p>Environment variables: <pre><code>export MY_PLATFORM_URL=\"https://my.nethesis.it\"\nexport MY_SYSTEM_SECRET=\"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n</code></pre></p>"},{"location":"05-system-registration/#step-3-call-registration-api","title":"Step 3: Call Registration API","text":"<p>The external system makes a POST request to register:</p> <p>Endpoint: <code>POST https://my.nethesis.it/api/systems/register</code></p> <p>Headers: <pre><code>Content-Type: application/json\n</code></pre></p> <p>Request Body: <pre><code>{\n  \"system_secret\": \"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n}\n</code></pre></p> <p>cURL Example: <pre><code>curl -X POST https://my.nethesis.it/api/systems/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"system_secret\": \"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n  }'\n</code></pre></p> <p>Python Example: <pre><code>import requests\n\nurl = \"https://my.nethesis.it/api/systems/register\"\npayload = {\n    \"system_secret\": \"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n}\n\nresponse = requests.post(url, json=payload)\ndata = response.json()\nsystem_key = data[\"data\"][\"system_key\"]\nprint(f\"Registered! system_key: {system_key}\")\n</code></pre></p>"},{"location":"05-system-registration/#step-4-platform-validates","title":"Step 4: Platform Validates","text":"<p>The platform performs several security checks:</p> <ol> <li>Token Format Validation:</li> <li>Splits on <code>.</code> \u2192 must have exactly 2 parts</li> <li>First part must start with <code>my_</code></li> <li> <p>Extracts public and secret parts</p> </li> <li> <p>Database Lookup:</p> </li> <li>Finds system using public part</li> <li> <p>Fast indexed query on <code>system_secret_public</code></p> </li> <li> <p>Security Checks:</p> </li> <li>System is not deleted</li> <li>System is not already registered</li> <li> <p>Public part matches stored value</p> </li> <li> <p>Cryptographic Verification:</p> </li> <li>Verifies secret part against Argon2id hash</li> <li>Constant-time comparison (prevents timing attacks)</li> </ol>"},{"location":"05-system-registration/#step-5-successful-registration","title":"Step 5: Successful Registration","text":"<p>Success Response (HTTP 200): <pre><code>{\n  \"code\": 200,\n  \"message\": \"system registered successfully\",\n  \"data\": {\n    \"system_key\": \"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\",\n    \"registered_at\": \"2025-11-06T10:30:00Z\",\n    \"message\": \"system registered successfully\"\n  }\n}\n</code></pre></p> <p>What happens: - <code>registered_at</code> timestamp is recorded in database - <code>system_key</code> becomes visible to administrators - System can now authenticate for inventory and heartbeat</p>"},{"location":"05-system-registration/#step-6-store-credentials","title":"Step 6: Store Credentials","text":"<p>The external system must securely store both credentials:</p> <p>Required for future authentication: - <code>system_key</code>: Username for HTTP Basic Auth - <code>system_secret</code>: Password for HTTP Basic Auth</p> <p>Storage recommendations: <pre><code># Configuration file\nMY_SYSTEM_KEY=NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\nMY_SYSTEM_SECRET=my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\n\n# Or use secure storage:\n# - System keyring\n# - Encrypted configuration\n# - Secret management service (Vault, etc.)\n</code></pre></p>"},{"location":"05-system-registration/#error-responses","title":"Error Responses","text":""},{"location":"05-system-registration/#invalid-token-format","title":"Invalid Token Format","text":"<p>HTTP 400 Bad Request: <pre><code>{\n  \"code\": 400,\n  \"message\": \"invalid system secret format\",\n  \"data\": null\n}\n</code></pre></p> <p>Causes: - Token doesn't contain <code>.</code> separator - Token doesn't start with <code>my_</code> - Token is malformed</p> <p>Solution: - Verify secret was copied correctly - Check for extra spaces or line breaks - Ensure complete token is provided</p>"},{"location":"05-system-registration/#invalid-credentials","title":"Invalid Credentials","text":"<p>HTTP 401 Unauthorized: <pre><code>{\n  \"code\": 401,\n  \"message\": \"invalid system secret\",\n  \"data\": null\n}\n</code></pre></p> <p>Causes: - Public part not found in database - Secret part doesn't match hash - Wrong secret provided</p> <p>Solution: - Verify secret is correct - Check if secret was regenerated - Ensure system was created in My platform</p>"},{"location":"05-system-registration/#system-deleted","title":"System Deleted","text":"<p>HTTP 403 Forbidden: <pre><code>{\n  \"code\": 403,\n  \"message\": \"system has been deleted\",\n  \"data\": null\n}\n</code></pre></p> <p>Causes: - System was soft-deleted by administrator - System marked as deleted in database</p> <p>Solution: - Contact administrator to restore system - Create a new system if needed</p>"},{"location":"05-system-registration/#already-registered","title":"Already Registered","text":"<p>HTTP 409 Conflict: <pre><code>{\n  \"code\": 409,\n  \"message\": \"system is already registered\",\n  \"data\": null\n}\n</code></pre></p> <p>Causes: - System has already completed registration - <code>registered_at</code> field is not null</p> <p>Solution: - System is already registered, proceed to authentication - Use existing <code>system_key</code> and <code>system_secret</code> for authentication - No action needed unless re-registration is required</p>"},{"location":"05-system-registration/#after-registration","title":"After Registration","text":""},{"location":"05-system-registration/#view-registration-status","title":"View Registration Status","text":"<p>Administrators can view registration status:</p> <ol> <li>Navigate to Systems</li> <li>Find the system and click View details</li> <li>Check fields:</li> <li>System_key: Now visible (was hidden before)</li> <li>Subscription: Shows timestamp</li> <li>Status: May still be \"unknown\" until first inventory</li> </ol>"},{"location":"05-system-registration/#next-steps-for-external-system","title":"Next Steps for External System","text":"<p>After successful registration, the system should:</p> <ol> <li>Store credentials securely</li> <li>Send first inventory (see Inventory and Heartbeat)</li> <li>Start heartbeat timer (recommended: every 5 minutes)</li> <li>Monitor authentication failures</li> </ol>"},{"location":"05-system-registration/#re-registration","title":"Re-registration","text":""},{"location":"05-system-registration/#when-is-re-registration-needed","title":"When is Re-registration Needed?","text":"<p>Re-registration is NOT typically needed. A system remains registered unless:</p> <ul> <li>System is deleted and recreated (new system_secret)</li> <li>Administrator explicitly resets registration (manual database operation)</li> </ul>"},{"location":"05-system-registration/#when-is-re-registration-not-needed","title":"When is Re-registration NOT Needed?","text":"<ul> <li>Secret regeneration: System remains registered, just use new secret</li> <li>System reboot: Registration persists</li> <li>Network changes: Registration persists</li> <li>Software updates: Registration persists</li> </ul>"},{"location":"05-system-registration/#security-considerations","title":"Security Considerations","text":""},{"location":"05-system-registration/#token-security","title":"Token Security","text":"<p>Best Practices: - Store tokens in encrypted configuration - Never log tokens in plaintext - Use secure channels (HTTPS only) - Rotate secrets periodically - Revoke compromised secrets immediately</p>"},{"location":"05-system-registration/#authentication-flow","title":"Authentication Flow","text":"<p>How it works: 1. External system splits <code>system_secret</code> into public + secret parts 2. Platform queries database using public part (fast indexed lookup) 3. Platform verifies secret part using Argon2id (memory-hard, GPU-resistant) 4. Platform caches result in Redis (5 minutes TTL)</p> <p>Security benefits: - Fast database queries (indexed public part) - Strong cryptography (Argon2id: 64MB memory, 3 iterations) - Brute-force resistant (memory-hard algorithm) - Industry-standard pattern (GitHub, Stripe, Slack use similar)</p>"},{"location":"05-system-registration/#network-security","title":"Network Security","text":"<p>Requirements: - Always use HTTPS for registration - Verify SSL/TLS certificates - Use secure DNS resolution - Avoid public Wi-Fi for initial registration</p>"},{"location":"05-system-registration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"05-system-registration/#registration-fails-with-network-error","title":"Registration Fails with Network Error","text":"<p>Problem: Cannot connect to registration endpoint</p> <p>Solutions: 1. Check network connectivity: <code>ping my.nethesis.it</code> 2. Verify DNS resolution: <code>nslookup my.nethesis.it</code> 3. Test HTTPS connectivity: <code>curl https://my.nethesis.it/api/health</code> 4. Check firewall rules (allow outbound HTTPS) 5. Verify proxy settings if behind corporate proxy</p>"},{"location":"05-system-registration/#registration-succeeds-but-system_key-not-visible","title":"Registration Succeeds but system_key Not Visible","text":"<p>Problem: Registration response shows success but admin panel doesn't show system_key</p> <p>Solutions: 1. Refresh the admin page (Ctrl+F5) 2. Clear browser cache 3. Wait 30 seconds and refresh (cache propagation) 4. Check different browser 5. Verify you're viewing the correct system</p>"},{"location":"05-system-registration/#lost-system_secret-before-registration","title":"Lost system_secret Before Registration","text":"<p>Problem: System was created but secret was not saved, system not yet registered</p> <p>Solutions: 1. Generate new secret: Click Regenerate Secret in admin panel 2. Copy new secret immediately 3. Configure external system with new secret 4. Proceed with registration</p>"},{"location":"05-system-registration/#lost-system_secret-after-registration","title":"Lost system_secret After Registration","text":"<p>Problem: System is registered but secret was lost</p> <p>Solutions: 1. If system is working: Do nothing, credentials are stored on system 2. If need to reconfigure: Regenerate secret in admin panel 3. Update secret on external system 4. System remains registered (no re-registration needed)</p>"},{"location":"05-system-registration/#registration-with-wrong-secret","title":"Registration with Wrong Secret","text":"<p>Problem: Accidentally registered with wrong system's secret</p> <p>Solutions: 1. This is impossible - each secret is unique per system 2. Platform validates public part matches system record 3. Registration will fail if using wrong system's secret</p>"},{"location":"05-system-registration/#system-shows-as-registered-but-cannot-authenticate","title":"System Shows as Registered but Cannot Authenticate","text":"<p>Problem: Registration succeeded but inventory/heartbeat fails with 401</p> <p>Solutions: 1. Verify both credentials are stored correctly:    - <code>system_key</code> (from registration response)    - <code>system_secret</code> (original from creation) 2. Check HTTP Basic Auth header format 3. Test authentication manually (see Inventory and Heartbeat) 4. Verify no extra spaces in stored credentials 5. Check if secret was regenerated after registration</p>"},{"location":"05-system-registration/#advanced-topics","title":"Advanced Topics","text":""},{"location":"05-system-registration/#automated-registration","title":"Automated Registration","text":"<p>For automated deployments, registration can be scripted:</p> <p>Bash script example: <pre><code>#!/bin/bash\n\nPLATFORM_URL=\"https://my.nethesis.it\"\nSYSTEM_SECRET=\"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n\n# Register and extract system_key\nresponse=$(curl -s -X POST \"$PLATFORM_URL/api/systems/register\" \\\n  -H \"Content-Type: application/json\" \\\n  -d \"{\\\"system_secret\\\": \\\"$SYSTEM_SECRET\\\"}\")\n\nsystem_key=$(echo \"$response\" | jq -r '.data.system_key')\n\nif [ \"$system_key\" != \"null\" ] &amp;&amp; [ -n \"$system_key\" ]; then\n  echo \"Registration successful!\"\n  echo \"system_key: $system_key\"\n\n  # Store credentials\n  echo \"MY_SYSTEM_KEY=$system_key\" &gt;&gt; /etc/my/config.conf\n  echo \"MY_SYSTEM_SECRET=$SYSTEM_SECRET\" &gt;&gt; /etc/my/config.conf\n\n  # Start inventory/heartbeat service\n  systemctl start my-agent\nelse\n  echo \"Registration failed!\"\n  echo \"$response\"\n  exit 1\nfi\n</code></pre></p>"},{"location":"05-system-registration/#multiple-registrations-error","title":"Multiple Registrations (Error)","text":"<p>Question: What happens if I register the same system multiple times?</p> <p>Answer: Second and subsequent registration attempts will fail with HTTP 409 (already registered). This is by design to prevent accidental re-registration.</p>"},{"location":"05-system-registration/#unregistering-a-system","title":"Unregistering a System","text":"<p>Question: How do I unregister a system?</p> <p>Answer: There is no \"unregister\" operation. To reset: 1. Delete the system (soft delete) 2. Restore the system 3. System remains registered with same <code>system_key</code> 4. Regenerate secret if needed</p> <p>Or: 1. Delete system (soft delete) 2. Permanently delete system 3. Create new system (new credentials, new registration)</p>"},{"location":"05-system-registration/#next-steps","title":"Next Steps","text":"<p>After successful registration:</p> <ul> <li>Configure inventory collection</li> <li>Set up heartbeat monitoring</li> <li>Test authentication</li> <li>Monitor system status in dashboard</li> </ul>"},{"location":"05-system-registration/#related-documentation","title":"Related Documentation","text":"<ul> <li>Systems Management</li> <li>Inventory and Heartbeat</li> <li>Backend API Documentation</li> </ul>"},{"location":"06-inventory-heartbeat/","title":"Inventory and Heartbeat","text":"<p>Learn how external systems send inventory data and heartbeat signals to My platform.</p>"},{"location":"06-inventory-heartbeat/#overview","title":"Overview","text":"<p>After system registration, external systems communicate with My through two mechanisms:</p> <ol> <li>Inventory: Complete system information snapshot (hardware, software, configuration)</li> <li>Heartbeat: Periodic \"I'm alive\" signal to indicate system is online</li> </ol> <p>Both operations use HTTP Basic Authentication with the registered credentials.</p>"},{"location":"06-inventory-heartbeat/#authentication","title":"Authentication","text":""},{"location":"06-inventory-heartbeat/#credentials","title":"Credentials","text":"<p>Use the credentials obtained during system lifecycle:</p> <ul> <li>Username: <code>system_key</code> (received at registration)</li> <li>Password: <code>system_secret</code> (from system creation)</li> </ul>"},{"location":"06-inventory-heartbeat/#http-basic-auth","title":"HTTP Basic Auth","text":"<p>Header format: <pre><code>Authorization: Basic base64(system_key:system_secret)\n</code></pre></p> <p>Example: <pre><code>system_key: NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\nsystem_secret: my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\n\nBase64 encode: \"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE:my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n\nAuthorization: Basic bXlfc3lzX2FiYzEyM2RlZjQ1NjpteV9hMWIyYzNkNGU1ZjZnN2g4aTlqMC5rMWwybTNuNG81cDZxN3I4czl0MHUxdjJ3M3g0eTV6NmE3YjhjOWQw\n</code></pre></p> <p>Most HTTP libraries handle this automatically: <pre><code>import requests\n\nrequests.post(url,\n    auth=('NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE', 'my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0'),\n    json=data\n)\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#heartbeat","title":"Heartbeat","text":"<p>Heartbeat is a simple signal to indicate the system is alive and reachable.</p>"},{"location":"06-inventory-heartbeat/#purpose","title":"Purpose","text":"<ul> <li>Detect when systems go offline</li> <li>Trigger alerts for dead systems</li> <li>Monitor system reliability</li> </ul>"},{"location":"06-inventory-heartbeat/#endpoint","title":"Endpoint","text":"<pre><code>POST https://my.nethesis.it/collect/api/systems/heartbeat\n</code></pre> <p>Note: Collect service runs on /collect (different from main backend on /backend/)</p>"},{"location":"06-inventory-heartbeat/#request","title":"Request","text":"<p>Headers: <pre><code>Authorization: Basic &lt;credentials&gt;\nContent-Type: application/json\n</code></pre></p> <p>Body: <pre><code>{}\n</code></pre></p> <p>Empty JSON object - no data needed!</p>"},{"location":"06-inventory-heartbeat/#response","title":"Response","text":"<p>Success (HTTP 200): <pre><code>{\n  \"code\": 200,\n  \"message\": \"heartbeat acknowledged\",\n  \"data\": {\n    \"system_key\": \"NOC-80F8-89A4-40B0-4AE9-A670-7C5F-99B3-F3EA\",\n    \"acknowledged\": true,\n    \"last_heartbeat\": \"2025-11-07T10:37:27.360343+01:00\"\n  }\n}\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#frequency","title":"Frequency","text":"<p>Recommended: Every 5 minutes</p> <p>Why 5 minutes? - Platform considers system \"active\" if heartbeat &lt; 15 minutes - 5-minute interval provides 3 missed beats before marking dead - Balance between network traffic and responsiveness</p>"},{"location":"06-inventory-heartbeat/#example-implementation","title":"Example Implementation","text":"<p>Python: <pre><code>import requests\nimport time\n\nCOLLECT_URL = \"https://my.nethesis.it/collect\"\nSYSTEM_KEY = \"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\"\nSYSTEM_SECRET = \"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n\ndef send_heartbeat():\n    \"\"\"Send heartbeat to My platform\"\"\"\n    try:\n        response = requests.post(\n            f\"{COLLECT_URL}/api/systems/heartbeat\",\n            auth=(SYSTEM_KEY, SYSTEM_SECRET),\n            json={},\n            timeout=10\n        )\n        response.raise_for_status()\n        print(\"Heartbeat sent successfully\")\n        return True\n    except Exception as e:\n        print(f\"Heartbeat failed: {e}\")\n        return False\n\n# Send heartbeat every 5 minutes\nwhile True:\n    send_heartbeat()\n    time.sleep(300)  # 5 minutes\n</code></pre></p> <p>Bash (cron): <pre><code>#!/bin/bash\n# /usr/local/bin/my-heartbeat.sh\n\nCOLLECT_URL=\"https://my.nethesis.it/collect\"\nSYSTEM_KEY=\"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\"\nSYSTEM_SECRET=\"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n\ncurl -s -X POST \"$COLLECT_URL/api/systems/heartbeat\" \\\n  -u \"$SYSTEM_KEY:$SYSTEM_SECRET\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{}' &gt; /dev/null\n</code></pre></p> <p>Crontab entry (every 5 minutes): <pre><code>*/5 * * * * /usr/local/bin/my-heartbeat.sh\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#heartbeat-status","title":"Heartbeat Status","text":"<p>Systems are classified based on heartbeat:</p> Status Condition Color Meaning Active &lt; 15 minutes \ud83d\udfe2 Green System is healthy Inactive \u2265 15 minutes \ud83d\udfe1 Yellow System is offline Unknown Never sent \u26aa Gray Never communicated"},{"location":"06-inventory-heartbeat/#inventory","title":"Inventory","text":"<p>Inventory is a complete snapshot of system configuration and installed software.</p>"},{"location":"06-inventory-heartbeat/#purpose_1","title":"Purpose","text":"<ul> <li>Track system hardware and software</li> <li>Detect configuration changes</li> <li>Monitor software versions</li> <li>Audit system compliance</li> <li>Track inventory history</li> </ul>"},{"location":"06-inventory-heartbeat/#endpoint_1","title":"Endpoint","text":"<pre><code>POST https://my.nethesis.it/collect/api/systems/inventory\n</code></pre> <p>Note: Same collect service, port 8081</p>"},{"location":"06-inventory-heartbeat/#request_1","title":"Request","text":"<p>Headers: <pre><code>Authorization: Basic &lt;credentials&gt;\nContent-Type: application/json\n</code></pre></p> <p>Body Structure: <pre><code>{\n  \"fqdn\": \"server.example.com\",\n  \"ipv4_address\": \"192.168.1.100\",\n  \"ipv6_address\": \"2001:db8::1\",\n  \"version\": \"8.0.1\",\n  \"os\": {\n    \"name\": \"Rocky Linux\",\n    \"version\": \"9.3\",\n    \"kernel\": \"5.14.0-362.8.1.el9_3.x86_64\"\n  },\n  \"hardware\": {\n    \"cpu_model\": \"Intel Xeon Gold 6248R\",\n    \"cpu_cores\": 8,\n    \"cpu_threads\": 16,\n    \"memory_total_gb\": 32,\n    \"disk_total_gb\": 500\n  },\n  \"network\": {\n    \"hostname\": \"server01\",\n    \"interfaces\": {\n      \"eth0\": {\n        \"ip\": \"192.168.1.100\",\n        \"netmask\": \"255.255.255.0\",\n        \"mac\": \"00:1a:2b:3c:4d:5e\"\n      },\n      \"eth1\": {\n        \"ip\": \"10.0.0.10\",\n        \"netmask\": \"255.255.0.0\",\n        \"mac\": \"00:1a:2b:3c:4d:5f\"\n      }\n    }\n  },\n  \"services\": {\n    \"nginx\": {\n      \"version\": \"1.24.0\",\n      \"status\": \"running\"\n    },\n    \"postgresql\": {\n      \"version\": \"15.5\",\n      \"status\": \"running\"\n    },\n    \"redis\": {\n      \"version\": \"7.2.3\",\n      \"status\": \"running\"\n    }\n  },\n  \"features\": {\n    \"docker\": {\n      \"enabled\": true,\n      \"version\": \"24.0.7\"\n    },\n    \"firewall\": {\n      \"enabled\": true,\n      \"type\": \"nftables\"\n    }\n  },\n  \"custom\": {\n    \"environment\": \"production\",\n    \"datacenter\": \"EU-West-1\",\n    \"backup_enabled\": true\n  }\n}\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#response_1","title":"Response","text":"<p>Success (HTTP 200): <pre><code>{\n  \"code\": 200,\n  \"message\": \"Inventory received and queued for processing\",\n  \"data\": {\n    \"data_size\": 16433,\n    \"message\": \"Your inventory data has been received and will be processed shortly\",\n    \"queue_status\": \"queued\",\n    \"system_id\": \"0a98637c-077b-428a-8e57-c2fbb892051a\",\n    \"timestamp\": \"2025-11-07T10:39:05.897352+01:00\"\n  }\n}\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#frequency_1","title":"Frequency","text":"<p>Recommended: Every 6 hours (4 times per day)</p> <p>Why 6 hours? - Balance between freshness and network/storage load - Captures daily changes - Reduces database growth - Sufficient for most monitoring needs</p> <p>Special cases: - After system changes: Send immediately - During updates: Send before and after - On-demand: Admin can trigger via API</p>"},{"location":"06-inventory-heartbeat/#inventory-schema","title":"Inventory Schema","text":""},{"location":"06-inventory-heartbeat/#required-fields","title":"Required Fields","text":"<p>Minimum required data: <pre><code>{\n  \"fqdn\": \"server.example.com\",\n  \"ipv4_address\": \"192.168.1.100\",\n  \"os\": {\n    \"name\": \"NethSec\",\n    \"type\": \"nethsecurity\",\n    \"family\": \"OpenWRT\",\n    \"release\": {\n        \"full\": \"8.6.0-dev+43d54cd33.20251020175318\",\n        \"major\": 7\n    }\n  }\n}\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#optional-sections","title":"Optional Sections","text":"<p>All other sections are optional but recommended:</p> <ul> <li><code>os</code>: Operating system information</li> <li><code>hardware</code>: Physical/virtual hardware specs</li> <li><code>network</code>: Network configuration</li> <li><code>services</code>: Installed services and versions</li> <li><code>features</code>: Enabled features and capabilities</li> <li><code>custom</code>: Any custom data (free-form)</li> </ul>"},{"location":"06-inventory-heartbeat/#auto-detection","title":"Auto-Detection","text":"<p>Some fields are auto-detected by platform:</p> <ul> <li>System Type: Detected from inventory data (ns8, nsec, etc.)</li> <li>Status: Auto-updated based on heartbeat</li> <li>Last Update: Timestamp of inventory receipt</li> </ul>"},{"location":"06-inventory-heartbeat/#example-implementation_1","title":"Example Implementation","text":"<p>Python: <pre><code>import requests\nimport platform\nimport psutil\nimport json\n\nCOLLECT_URL = \"https://my.nethesis.it/collect\"\nSYSTEM_KEY = \"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\"\nSYSTEM_SECRET = \"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n\ndef collect_inventory():\n    \"\"\"Collect system inventory\"\"\"\n    return {\n        \"fqdn\": platform.node(),\n        \"ipv4_address\": get_primary_ip(),  # Your implementation\n        \"version\": \"8.0.1\",\n        \"os\": {\n            \"name\": platform.system(),\n            \"version\": platform.release(),\n            \"kernel\": platform.version()\n        },\n        \"hardware\": {\n            \"cpu_cores\": psutil.cpu_count(logical=False),\n            \"cpu_threads\": psutil.cpu_count(logical=True),\n            \"memory_total_gb\": round(psutil.virtual_memory().total / (1024**3), 2)\n        },\n        \"services\": collect_services(),  # Your implementation\n        \"features\": collect_features(),  # Your implementation\n    }\n\ndef send_inventory():\n    \"\"\"Send inventory to My platform\"\"\"\n    try:\n        inventory = collect_inventory()\n\n        response = requests.post(\n            f\"{COLLECT_URL}/api/systems/inventory\",\n            auth=(SYSTEM_KEY, SYSTEM_SECRET),\n            json=inventory,\n            timeout=30\n        )\n        response.raise_for_status()\n\n        data = response.json()\n        print(f\"Inventory sent successfully\")\n        print(f\"Changes detected: {data['data']['changes_detected']}\")\n        return True\n\n    except Exception as e:\n        print(f\"Inventory send failed: {e}\")\n        return False\n\n# Send inventory every 6 hours\nimport time\nwhile True:\n    send_inventory()\n    time.sleep(21600)  # 6 hours\n</code></pre></p> <p>Bash: <pre><code>#!/bin/bash\n# /usr/local/bin/my-inventory.sh\n\nCOLLECT_URL=\"https://my.nethesis.it/collect\"\nSYSTEM_KEY=\"NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE\"\nSYSTEM_SECRET=\"my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0\"\n\n# Collect inventory (example - customize for your system)\nINVENTORY=$(cat &lt;&lt;EOF\n{\n  \"fqdn\": \"$(hostname -f)\",\n  \"ipv4_address\": \"$(hostname -I | awk '{print $1}')\",\n  \"version\": \"8.0.1\",\n  \"os\": {\n    \"name\": \"$(uname -s)\",\n    \"version\": \"$(uname -r)\"\n  },\n  \"hardware\": {\n    \"cpu_cores\": $(nproc),\n    \"memory_total_gb\": $(free -g | awk '/^Mem:/{print $2}')\n  }\n}\nEOF\n)\n\n# Send to platform\ncurl -X POST \"$COLLECT_URL/api/systems/inventory\" \\\n  -u \"$SYSTEM_KEY:$SYSTEM_SECRET\" \\\n  -H \"Content-Type: application/json\" \\\n  -d \"$INVENTORY\"\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#change-detection","title":"Change Detection","text":"<p>My automatically detects changes between inventory snapshots.</p>"},{"location":"06-inventory-heartbeat/#what-is-tracked","title":"What is Tracked","text":"<ul> <li>Hardware changes (CPU, memory, disk)</li> <li>Software version changes</li> <li>Service additions/removals</li> <li>Network configuration changes</li> <li>Feature toggles</li> <li>Custom field modifications</li> </ul>"},{"location":"06-inventory-heartbeat/#change-categories","title":"Change Categories","text":"<p>Changes are categorized by type:</p> <ul> <li>OS: Operating system and kernel</li> <li>Hardware: Physical/virtual hardware</li> <li>Network: Network interfaces and configuration</li> <li>Features: Enabled features and capabilities</li> <li>Services: Installed services</li> <li>System: General system settings</li> </ul>"},{"location":"06-inventory-heartbeat/#change-severity","title":"Change Severity","text":"<p>Each change has a severity level:</p> <ul> <li>Critical: Requires immediate attention (e.g., hardware failure)</li> <li>High: Important changes (e.g., OS upgrade)</li> <li>Medium: Notable changes (e.g., service update)</li> <li>Low: Minor changes (e.g., metrics update)</li> </ul>"},{"location":"06-inventory-heartbeat/#viewing-changes","title":"Viewing Changes","text":"<p>In Admin Panel: 1. Navigate to Systems &gt; System Details 2. Click Inventory tab 3. View Changes section 4. See detailed diff between versions</p> <p>Change types: - \ud83d\udfe2 Create: New field added - \ud83d\udfe1 Update: Field value changed - \ud83d\udd34 Delete: Field removed</p> <p>Example change log: <pre><code>[2025-11-06 10:30] OS Version updated\n  - Old: Rocky Linux 9.2\n  - New: Rocky Linux 9.3\n  - Severity: High\n  - Category: OS\n\n[2025-11-06 10:30] Nginx version updated\n  - Old: 1.23.0\n  - New: 1.24.0\n  - Severity: Medium\n  - Category: Services\n\n[2025-11-06 10:30] New feature enabled: Docker\n  - Value: 24.0.7\n  - Severity: Medium\n  - Category: Features\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#monitoring-in-admin-panel","title":"Monitoring in Admin Panel","text":""},{"location":"06-inventory-heartbeat/#real-time-status","title":"Real-time Status","text":"<p>Dashboard view: - Total systems count - Active / Inactive / Unknown breakdown - Recent inventory changes - Systems requiring attention</p> <p>System list: - Heartbeat status indicator (\ud83d\udfe2\ud83d\udfe1\u26aa) - Last heartbeat time - Last inventory time - Change notifications</p>"},{"location":"06-inventory-heartbeat/#alerts-if-configured","title":"Alerts (if configured)","text":"<p>Automatic alerts for: - System goes offline (no heartbeat for 15+ minutes) - Critical changes detected in inventory - New system registered - System version mismatch - Security vulnerabilities detected</p>"},{"location":"06-inventory-heartbeat/#system-health","title":"System Health","text":"<p>Health score based on: - Heartbeat reliability (% uptime) - Inventory freshness - Number of changes - Critical issues count</p>"},{"location":"06-inventory-heartbeat/#troubleshooting","title":"Troubleshooting","text":""},{"location":"06-inventory-heartbeat/#authentication-fails-http-401","title":"Authentication Fails (HTTP 401)","text":"<p>Problem: \"Invalid system credentials\" or \"Unauthorized\"</p> <p>Solutions: 1. Verify credentials are correct:    <pre><code>echo -n \"system_key:system_secret\" | base64\n</code></pre> 2. Check for extra spaces in credentials 3. Ensure system is registered 4. Verify secret wasn't regenerated 5. Test with curl:    <pre><code>curl -v -u \"system_key:system_secret\" \\\n  https://my.nethesis.it/collect/api/systems/heartbeat \\\n  -H \"Content-Type: application/json\" \\\n  -d '{}'\n</code></pre></p>"},{"location":"06-inventory-heartbeat/#connection-timeout","title":"Connection Timeout","text":"<p>Problem: Request times out, no response</p> <p>Solutions: 1. Check network connectivity:    <pre><code>ping my.nethesis.it\n</code></pre> 2. Verify port 8081 is accessible:    <pre><code>telnet my.nethesis.it 8081\n</code></pre> 3. Check firewall rules (allow outbound to port 8081) 4. Verify DNS resolution 5. Test from different network</p>"},{"location":"06-inventory-heartbeat/#inventory-not-updating","title":"Inventory Not Updating","text":"<p>Problem: Inventory sent successfully but not visible in admin panel</p> <p>Solutions: 1. Wait 60 seconds and refresh (cache propagation) 2. Verify you're viewing the correct system 3. Check inventory was sent to correct endpoint (port 8081) 4. Verify system is not deleted 5. Check system logs for errors</p>"},{"location":"06-inventory-heartbeat/#heartbeat-shows-as-dead","title":"Heartbeat Shows as \"Dead\"","text":"<p>Problem: System shows red/dead status despite sending heartbeat</p> <p>Solutions: 1. Check heartbeat frequency (must be &lt; 15 minutes) 2. Verify heartbeat is reaching platform:    <pre><code>curl -v https://my.nethesis.it/collect/api/systems/heartbeat \\\n  -u \"key:secret\" -H \"Content-Type: application/json\" -d '{}'\n</code></pre> 3. Check system time is synchronized (NTP) 4. Verify no clock drift 5. Review collect service logs (admin only)</p>"},{"location":"06-inventory-heartbeat/#changes-not-detected","title":"Changes Not Detected","text":"<p>Problem: Inventory sent but no changes shown</p> <p>Solutions: 1. Verify actual data changed between inventories 2. Check that changed fields are supported 3. Small numerical changes may not trigger detection 4. Custom fields are tracked for changes 5. Wait for next inventory and compare</p>"},{"location":"06-inventory-heartbeat/#best-practices","title":"Best Practices","text":""},{"location":"06-inventory-heartbeat/#heartbeat_1","title":"Heartbeat","text":"<ul> <li>Send every 5 minutes consistently</li> <li>Use scheduled task (cron, systemd timer)</li> <li>Log heartbeat failures for debugging</li> <li>Implement retry logic (exponential backoff)</li> <li>Monitor heartbeat success rate</li> </ul>"},{"location":"06-inventory-heartbeat/#inventory_1","title":"Inventory","text":"<ul> <li>Send complete inventory every time</li> <li>Don't send partial updates</li> <li>Include all relevant data</li> <li>Use consistent field names</li> <li>Validate JSON before sending</li> <li>Send immediately after significant changes</li> </ul>"},{"location":"06-inventory-heartbeat/#error-handling","title":"Error Handling","text":"<ul> <li>Implement retry logic for network failures</li> <li>Log all errors with context</li> <li>Don't retry authentication errors (401)</li> <li>Use exponential backoff for retries</li> <li>Alert on repeated failures</li> </ul>"},{"location":"06-inventory-heartbeat/#security","title":"Security","text":"<ul> <li>Store credentials securely</li> <li>Never log credentials</li> <li>Use HTTPS only</li> <li>Verify SSL certificates</li> <li>Rotate credentials periodically</li> <li>Monitor for authentication failures</li> </ul>"},{"location":"06-inventory-heartbeat/#performance","title":"Performance","text":"<ul> <li>Compress large inventories</li> <li>Batch data collection</li> <li>Avoid unnecessary inventory sends</li> <li>Use efficient data structures</li> <li>Monitor network bandwidth</li> </ul>"},{"location":"06-inventory-heartbeat/#related-documentation","title":"Related Documentation","text":"<ul> <li>System Registration</li> <li>Systems Management</li> <li>Backend API</li> <li>Collect Service</li> </ul>"},{"location":"07-impersonation/","title":"User Impersonation","text":"<p>Learn how to use the impersonation feature to troubleshoot user issues while respecting privacy and consent.</p>"},{"location":"07-impersonation/#what-is-user-impersonation","title":"What is User Impersonation?","text":"<p>User impersonation allows authorized administrators to temporarily access My platform as another user. This feature is useful for:</p> <ul> <li>Troubleshooting: Reproduce issues users are experiencing</li> <li>Support: Help users with complex operations</li> <li>Training: Demonstrate features to users</li> <li>Testing: Verify permissions and access controls</li> </ul>"},{"location":"07-impersonation/#key-features","title":"Key Features","text":""},{"location":"07-impersonation/#privacy-focused-design","title":"\ud83d\udd12 Privacy-Focused Design","text":"<ul> <li>User Consent Required: Users must explicitly enable impersonation</li> <li>Time-Limited: Users control how long impersonation is allowed (1-168 hours)</li> <li>Complete Transparency: All actions logged and visible to the user</li> <li>Easy Revocation: Users can disable consent at any time</li> </ul>"},{"location":"07-impersonation/#security-controls","title":"\ud83d\udee1\ufe0f Security Controls","text":"<ul> <li>Permission-Based: Only Super Admin or Owner organization users can impersonate</li> <li>No Self-Impersonation: Cannot impersonate your own account</li> <li>No Chaining: Cannot impersonate while already impersonating another user</li> <li>Automatic Expiration: Consent automatically expires after user-defined duration</li> <li>Session Tracking: Each impersonation session has unique ID for audit</li> </ul>"},{"location":"07-impersonation/#complete-audit-trail","title":"\ud83d\udcca Complete Audit Trail","text":"<ul> <li>Every API call during impersonation is logged</li> <li>Users can view all actions performed during impersonation</li> <li>Sensitive data automatically redacted from logs</li> <li>Session-based organization for easy review</li> </ul>"},{"location":"07-impersonation/#who-can-impersonate","title":"Who Can Impersonate?","text":""},{"location":"07-impersonation/#required-permissions","title":"Required Permissions","text":"<p>Super Admin Role: - Users with Super Admin role have <code>impersonate:users</code> permission - Can impersonate any user (with their consent) - Assigned by Owner organization users only</p> <p>Owner Organization Users: - Automatically have impersonation capability - Can impersonate users in their organization hierarchy - No additional role assignment needed</p> <p>Everyone Else: - Cannot see impersonation features - Cannot impersonate any user</p>"},{"location":"07-impersonation/#impersonation-workflow","title":"Impersonation Workflow","text":""},{"location":"07-impersonation/#step-1-user-enables-consent","title":"Step 1: User Enables Consent","text":"<p>Before impersonation can occur, the target user must enable consent.</p> <p>For Users:</p> <ol> <li>Log in to your account</li> <li>Navigate to Account Settings &gt; Impersonation</li> <li>Find Consent to Impersonation section</li> <li>Click Enable Impersonation</li> <li>Set duration (1-168 hours)</li> <li>Click Save</li> </ol> <p>What happens: - Consent is recorded with timestamp - Administrator is notified consent is available - Expires automatically after duration - Can be revoked at any time</p> <p>Duration Options: - 1-24 hours: Short-term troubleshooting - 24-72 hours: Multi-day support - 72-168 hours: Extended access (max 1 week)</p>"},{"location":"07-impersonation/#step-2-administrator-impersonates-user","title":"Step 2: Administrator Impersonates User","text":"<p>For Administrators (Super Admin or Owner):</p> <ol> <li>Navigate to Users</li> <li>Find the target user</li> <li>Check if Impersonate user is available (using kebab men\u00f9)</li> <li>Click Impersonate User</li> <li>Confirm the action</li> <li>You are now acting as that user</li> </ol> <p>During Impersonation:</p> <p>You will see: - Banner at top: \"You are impersonating [User Name]\" - Exit button: Click to return to your account - All features: Exactly as the user sees them - User's permissions: Filtered by their actual permissions</p>"},{"location":"07-impersonation/#step-3-perform-support-actions","title":"Step 3: Perform Support Actions","text":"<p>While impersonating:</p> <ul> <li>Navigate the platform as the user would</li> <li>Reproduce reported issues</li> <li>Perform actions on behalf of the user</li> <li>Test features and permissions</li> <li>Document findings</li> </ul> <p>Remember: - All actions are logged - User can see everything you do - Treat user data with respect - Exit impersonation when done</p>"},{"location":"07-impersonation/#step-4-exit-impersonation","title":"Step 4: Exit Impersonation","text":"<p>To exit impersonation:</p> <ol> <li>Click Exit Impersonation button in banner</li> <li>You return to your original account</li> <li>Impersonation session is closed</li> </ol> <p>Automatic Exit: - Session expires after user's consent duration - If user revokes consent during impersonation - If token expires (follows consent duration)</p>"},{"location":"07-impersonation/#for-users-managing-consent","title":"For Users: Managing Consent","text":""},{"location":"07-impersonation/#enabling-impersonation-consent","title":"Enabling Impersonation Consent","text":"<p>When to enable: - When you have an issue and need support - When requesting help from administrator - Before training session - When administrator asks for consent</p> <p>How to enable:</p> <ol> <li>Go to Account Settings &gt; Impersonation</li> <li>Click Consent to Impersonation</li> <li>Choose duration:    <pre><code>\u25cb 1 hour   - Quick support\n\u25cb 24 hours - Same day support\n\u25cb 72 hours - Multi-day issue\n\u25cb Custom   - Specify hours (max 168)\n</code></pre></li> <li>Click Enable</li> </ol> <p>Confirmation: <pre><code>\u2713 Impersonation consent enabled\n  Expires: [Date and time]\n  Duration: [X] hours\n</code></pre></p>"},{"location":"07-impersonation/#checking-consent-status","title":"Checking Consent Status","text":"<p>To check if consent is active:</p> <ol> <li>Go to Account Settings &gt; Impersonation</li> <li>View Impersonation Consent section:    <pre><code>Status: Active\nExpires: 2025-11-07 10:30:00 UTC\n</code></pre></li> </ol>"},{"location":"07-impersonation/#revoking-consent","title":"Revoking Consent","text":"<p>To disable consent:</p> <ol> <li>Go to Account Settings &gt; Impersonation</li> <li>Click Revoke Consent</li> <li>Confirm the action</li> </ol> <p>Effects: - Consent immediately disabled - Active impersonation sessions terminated - Administrator can no longer impersonate - Can be re-enabled anytime</p>"},{"location":"07-impersonation/#viewing-impersonation-audit","title":"Viewing Impersonation Audit","text":"<p>To see who impersonated you:</p> <ol> <li>Go to Account Settings &gt; Impersonation</li> <li>Under Sessions</li> <li> <p>See complete history:    <pre><code>Started: 2025-11-06 10:00:00 UTC\nEnded: 2025-11-06 11:30:00 UTC\nDuration: 1.5 hours\nImpersonator: John Admin (john@example.com)\nStatus: Ongoing\n</code></pre></p> </li> <li> <p>Click Show audit log to see all actions</p> </li> </ol> <p>Audit Information: - Date and time of each action - API endpoint called - Sensitive data automatically redacted - Result (success/failure)</p>"},{"location":"07-impersonation/#for-administrators-using-impersonation","title":"For Administrators: Using Impersonation","text":""},{"location":"07-impersonation/#checking-impersonation-availability","title":"Checking Impersonation Availability","text":"<p>In user list:</p> <p>Users with active consent show: - Impersonate user status enabled - Consent expiration time - Click to impersonate</p> <p>Users without consent: - Impersonate user status disabled</p>"},{"location":"07-impersonation/#starting-impersonation","title":"Starting Impersonation","text":"<p>Requirements: - User has active consent - You have Super Admin role or Owner organization role - User is not deleted or suspended - You are not already impersonating someone</p> <p>Steps:</p> <ol> <li>Find User:</li> <li>Navigate to Users</li> <li> <p>Search for target user</p> </li> <li> <p>Verify Consent:</p> </li> <li>Check Impersonate user status enabled</li> <li>Check consent expiration time</li> <li> <p>Ensure sufficient time for your needs</p> </li> <li> <p>Initiate Impersonation:</p> </li> <li>Click Impersonate User (using kebab men\u00f9)</li> <li> <p>Confirm dialog:      <pre><code>You will temporarily act as user Edoardo Spadoni and have their permissions.\n\n To return to your account, click the close icon on the impersonation badge in the top bar.\n\n[Cancel] [Impersonate user]\n</code></pre></p> </li> <li> <p>Confirmation:</p> </li> <li>You are now impersonating the user</li> <li>Banner appears at top</li> <li>Session starts</li> </ol>"},{"location":"07-impersonation/#during-impersonation-session","title":"During Impersonation Session","text":"<p>Visual Indicators:</p> <p>Banner at top of every page:</p> <p>What You See: - Exact same interface as user - User's permissions (may be more restrictive than yours) - User's organization and data - User's customizations and preferences</p> <p>What You Can Do: - Navigate all pages user can access - Perform any action user can perform - Create/edit/delete based on user permissions - Test features and reproduce issues</p> <p>What You Cannot Do: - Access features user cannot access - Bypass user's permission restrictions - Impersonate another user while impersonating - Modify your own account</p> <p>Best Practices: - Document your actions - Minimize time in impersonation - Only perform necessary actions - Inform user what you did - Exit when finished</p>"},{"location":"07-impersonation/#exiting-impersonation","title":"Exiting Impersonation","text":"<p>Normal Exit:</p> <ul> <li>Click X button in banner</li> <li>Return to your account</li> </ul> <p>Automatic Exit:</p> <p>Impersonation automatically ends when: - Consent duration expires - User revokes consent - Session token expires - You log out - User is suspended/deleted</p>"},{"location":"07-impersonation/#security-and-privacy","title":"Security and Privacy","text":""},{"location":"07-impersonation/#what-is-logged","title":"What is Logged","text":"<p>Logged Information: - Timestamp of each action - API endpoint and method (GET, POST, etc.) - HTTP status code (200, 404, etc.) - Request parameters (sensitive data redacted) - Response status (sensitive data redacted)</p> <p>Automatically Redacted: - Passwords - Authentication tokens - System secrets - Any field containing \"password\", \"secret\", \"token\"</p> <p>Example Log Entry: <pre><code>{\n  \"timestamp\": \"2025-11-06T10:15:23Z\",\n  \"session_id\": \"imp_abc123\",\n  \"impersonator\": \"admin@example.com\",\n  \"impersonated_user\": \"user@example.com\",\n  \"method\": \"POST\",\n  \"endpoint\": \"/api/users\",\n  \"status\": 201,\n  \"request_body\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"password\": \"[REDACTED]\"\n  }\n}\n</code></pre></p>"},{"location":"07-impersonation/#data-protection","title":"Data Protection","text":"<p>User Control: - Users choose when to enable consent - Users control duration - Users can revoke at any time - Users see complete audit trail</p> <p>Platform Protection: - No access without consent - Automatic expiration - Complete logging - Sensitive data redaction</p> <p>Compliance: - Audit trail for regulatory requirements - Consent-based access model - User visibility and control - Data privacy respected</p>"},{"location":"07-impersonation/#common-use-cases","title":"Common Use Cases","text":""},{"location":"07-impersonation/#troubleshooting-user-issues","title":"Troubleshooting User Issues","text":"<p>Scenario: User reports they cannot see a feature</p> <p>Workflow: 1. User enables impersonation consent (1 hour) 2. Administrator impersonates user 3. Administrator navigates to reported area 4. Reproduces issue 5. Identifies permission/configuration problem 6. Exits impersonation 7. Fixes issue in user's settings 8. User confirms fix</p>"},{"location":"07-impersonation/#training-new-users","title":"Training New Users","text":"<p>Scenario: Training user on complex workflow</p> <p>Workflow: 1. User enables impersonation (24 hours) 2. Administrator impersonates 3. Performs workflow steps 4. Documents each action 5. Exits impersonation 6. Shares audit with user 7. User reviews actions performed 8. User practices independently</p>"},{"location":"07-impersonation/#permission-verification","title":"Permission Verification","text":"<p>Scenario: Verify user has correct permissions</p> <p>Workflow: 1. User enables impersonation (1 hour) 2. Administrator impersonates 3. Tests access to various features 4. Documents what is visible/accessible 5. Exits impersonation 6. Adjusts permissions if needed</p>"},{"location":"07-impersonation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"07-impersonation/#cannot-impersonate-user","title":"Cannot Impersonate User","text":"<p>Problem: Impersonate button is disabled</p> <p>Solutions: 1. Check user has enabled consent:    - Ask user to enable in Profile &gt; Security    - Verify consent hasn't expired 2. Verify you have permissions:    - Super Admin role OR    - Owner organization role 3. Check user status:    - User is not suspended    - User is not deleted 4. Verify not already impersonating:    - Exit current impersonation first</p>"},{"location":"07-impersonation/#consent-not-showing","title":"Consent Not Showing","text":"<p>Problem: User enabled consent but administrator doesn't see it</p> <p>Solutions: 1. Refresh the page (Ctrl+F5) 2. Wait 30 seconds (cache propagation) 3. Check consent expiration time 4. Verify user saved the consent 5. Check user didn't accidentally revoke</p>"},{"location":"07-impersonation/#impersonation-session-ends-unexpectedly","title":"Impersonation Session Ends Unexpectedly","text":"<p>Problem: Kicked out of impersonation session</p> <p>Possible Causes: - User revoked consent - Consent duration expired - Token expired - User was suspended - Network interruption</p> <p>Solutions: 1. Check if consent is still active 2. Ask user to re-enable consent 3. Check consent expiration time 4. Verify your network connection</p>"},{"location":"07-impersonation/#cannot-see-users-data","title":"Cannot See User's Data","text":"<p>Problem: During impersonation, cannot see expected data</p> <p>Explanation: - You see exactly what user sees - User may have restricted permissions - Organization access may be limited - This is expected behavior</p> <p>Solutions: 1. Verify user's assigned roles 2. Check user's organization membership 3. Review hierarchical permissions 4. Adjust user permissions if needed</p>"},{"location":"07-impersonation/#best-practices","title":"Best Practices","text":""},{"location":"07-impersonation/#for-users","title":"For Users","text":"<p>Enabling Consent: - Only enable when requested or needed - Set minimum necessary duration - Revoke when support is complete - Review audit trail after impersonation</p> <p>Privacy: - Trust your administrators - Consent is entirely voluntary - You control when and how long - You can see everything they did</p>"},{"location":"07-impersonation/#for-administrators","title":"For Administrators","text":"<p>Before Impersonating: - Have clear purpose for impersonation - Request user enable consent - Plan what you need to do - Estimate time needed</p> <p>During Impersonation: - Work efficiently - Document your actions - Only perform necessary operations - Respect user's privacy - Exit promptly when done</p> <p>After Impersonation: - Inform user what was done - Document findings - Share audit if requested - Follow up on issues found</p>"},{"location":"07-impersonation/#for-organizations","title":"For Organizations","text":"<p>Policy: - Define when impersonation is appropriate - Document approval process - Train administrators - Review audit trails regularly</p> <p>Security: - Limit Super Admin role assignment - Monitor impersonation usage - Review audit logs - Investigate unusual patterns</p>"},{"location":"07-impersonation/#related-documentation","title":"Related Documentation","text":"<ul> <li>Users Management</li> <li>Authentication Guide</li> <li>Backend API Documentation</li> </ul>"},{"location":"CONTRIBUTING/","title":"Contributing to My Documentation","text":"<p>Thank you for your interest in improving the My documentation!</p>"},{"location":"CONTRIBUTING/#documentation-structure","title":"Documentation Structure","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                    # Home page\n\u251c\u2500\u2500 01-authentication.md        # Authentication guide\n\u251c\u2500\u2500 02-organizations.md         # Organizations guide\n\u251c\u2500\u2500 03-users.md                 # Users management guide\n\u251c\u2500\u2500 04-systems.md               # Systems management guide\n\u251c\u2500\u2500 05-system-registration.md   # Registration workflow\n\u251c\u2500\u2500 06-inventory-heartbeat.md   # Monitoring guide\n\u251c\u2500\u2500 07-impersonation.md         # User impersonation guide\n\u251c\u2500\u2500 stylesheets/                # Custom CSS\n\u251c\u2500\u2500 javascripts/                # Custom JS\n\u2514\u2500\u2500 images/                     # Images and diagrams\n</code></pre>"},{"location":"CONTRIBUTING/#writing-guidelines","title":"Writing Guidelines","text":""},{"location":"CONTRIBUTING/#style-guide","title":"Style Guide","text":"<ul> <li>Tone: Clear, professional, helpful</li> <li>Audience: End users and administrators (non-technical)</li> <li>Language: Simple, avoiding jargon when possible</li> <li>Examples: Always include practical examples</li> </ul>"},{"location":"CONTRIBUTING/#formatting","title":"Formatting","text":"<ul> <li>Headers: Use <code>##</code> for main sections, <code>###</code> for subsections</li> <li>Code blocks: Always specify language (bash, json, python, etc.)</li> <li>Lists: Use <code>-</code> for unordered lists, <code>1.</code> for ordered</li> <li>Emphasis: Use bold for important terms, italic for emphasis</li> <li>Links: Use descriptive text, not \"click here\"</li> </ul>"},{"location":"CONTRIBUTING/#example-structure","title":"Example Structure","text":"<pre><code># Page Title\n\nBrief introduction explaining what this page covers.\n\n## Main Section\n\nDetailed explanation with examples.\n\n### Subsection\n\nSpecific details or procedures.\n\n**Example:**\n\\`\\`\\`bash\ncommand --flag value\n\\`\\`\\`\n\n## Troubleshooting\n\nCommon problems and solutions.\n\n## Related Documentation\n\n- [Link to related page](other-page.md)\n</code></pre>"},{"location":"CONTRIBUTING/#building-locally","title":"Building Locally","text":""},{"location":"CONTRIBUTING/#prerequisites","title":"Prerequisites","text":"<pre><code># Install Python 3.x\npython3 --version\n\n# Install dependencies\npip install -r requirements.txt\n</code></pre>"},{"location":"CONTRIBUTING/#local-development","title":"Local Development","text":"<pre><code># Start local server with hot reload\nmkdocs serve\n\n# Open in browser\nopen http://localhost:8000\n</code></pre> <p>The documentation will automatically reload when you save changes.</p>"},{"location":"CONTRIBUTING/#building","title":"Building","text":"<pre><code># Build static site\nmkdocs build\n\n# Output will be in site/ directory\n</code></pre>"},{"location":"CONTRIBUTING/#making-changes","title":"Making Changes","text":""},{"location":"CONTRIBUTING/#1-edit-documentation","title":"1. Edit Documentation","text":"<p>Edit the relevant <code>.md</code> file in the <code>docs/</code> directory.</p>"},{"location":"CONTRIBUTING/#2-preview-locally","title":"2. Preview Locally","text":"<pre><code>mkdocs serve\n</code></pre> <p>Check your changes at http://localhost:8000</p>"},{"location":"CONTRIBUTING/#3-check-links","title":"3. Check Links","text":"<p>Ensure all internal links work: - Relative links to other docs: <code>[text](other-file.md)</code> - Links to sections: <code>[text](other-file.md#section-name)</code> - External links: Full URL</p>"},{"location":"CONTRIBUTING/#4-add-images","title":"4. Add Images","text":"<p>If adding images:</p> <ol> <li>Place image in <code>docs/images/</code></li> <li>Use relative path: <code>![Alt text](images/filename.png)</code></li> <li>Optimize image size (max 1MB)</li> </ol>"},{"location":"CONTRIBUTING/#5-test-build","title":"5. Test Build","text":"<pre><code># Test that build succeeds\nmkdocs build --strict\n\n# This will fail if there are warnings\n</code></pre>"},{"location":"CONTRIBUTING/#adding-new-pages","title":"Adding New Pages","text":""},{"location":"CONTRIBUTING/#1-create-file","title":"1. Create File","text":"<p>Create new <code>.md</code> file in <code>docs/</code> directory:</p> <pre><code>touch docs/07-new-feature.md\n</code></pre>"},{"location":"CONTRIBUTING/#2-add-to-navigation","title":"2. Add to Navigation","text":"<p>Edit <code>mkdocs.yml</code> and add to navigation:</p> <pre><code>nav:\n  - User Guide:\n      - New Feature: 07-new-feature.md\n</code></pre>"},{"location":"CONTRIBUTING/#3-link-from-other-pages","title":"3. Link from Other Pages","text":"<p>Add links from relevant pages:</p> <pre><code>See also: [New Feature Guide](07-new-feature.md)\n</code></pre>"},{"location":"CONTRIBUTING/#mkdocs-features","title":"MkDocs Features","text":""},{"location":"CONTRIBUTING/#admonitions","title":"Admonitions","text":"<pre><code>!!! note \"Title\"\n    Content here\n\n!!! warning\n    Warning content\n\n!!! danger\n    Danger content\n\n!!! tip\n    Tip content\n</code></pre>"},{"location":"CONTRIBUTING/#code-blocks-with-highlighting","title":"Code Blocks with Highlighting","text":"<pre><code>```python title=\"example.py\" linenums=\"1\"\ndef hello():\n    print(\"Hello, World!\")\n```\n</code></pre>"},{"location":"CONTRIBUTING/#tabs","title":"Tabs","text":"<pre><code>=== \"Tab 1\"\n    Content for tab 1\n\n=== \"Tab 2\"\n    Content for tab 2\n</code></pre>"},{"location":"CONTRIBUTING/#task-lists","title":"Task Lists","text":"<pre><code>- [x] Completed task\n- [ ] Incomplete task\n</code></pre>"},{"location":"CONTRIBUTING/#deployment","title":"Deployment","text":"<p>Documentation is automatically deployed when you push to <code>main</code>:</p> <ol> <li>GitHub Actions runs on push</li> <li>MkDocs builds the site</li> <li>Site is deployed to GitHub Pages</li> <li>Available at: https://nethesis.github.io/my/</li> </ol> <p>You can also deploy manually:</p> <pre><code>mkdocs gh-deploy\n</code></pre>"},{"location":"CONTRIBUTING/#review-process","title":"Review Process","text":"<ol> <li>Make your changes in a feature branch</li> <li>Test locally with <code>mkdocs serve</code></li> <li>Ensure build passes: <code>mkdocs build --strict</code></li> <li>Create Pull Request</li> <li>Documentation will be reviewed</li> <li>Once approved, merge to main</li> <li>Automatic deployment to GitHub Pages</li> </ol>"},{"location":"CONTRIBUTING/#common-tasks","title":"Common Tasks","text":""},{"location":"CONTRIBUTING/#update-home-page","title":"Update Home Page","text":"<p>Edit <code>docs/index.md</code></p>"},{"location":"CONTRIBUTING/#add-faq-section","title":"Add FAQ Section","text":"<p>Create <code>docs/faq.md</code> and add to navigation in <code>mkdocs.yml</code></p>"},{"location":"CONTRIBUTING/#fix-broken-link","title":"Fix Broken Link","text":"<ol> <li>Search for the link: <code>grep -r \"broken-link\" docs/</code></li> <li>Update all occurrences</li> <li>Test with <code>mkdocs serve</code></li> </ol>"},{"location":"CONTRIBUTING/#add-external-resource","title":"Add External Resource","text":"<p>Add to <code>mkdocs.yml</code> under <code>extra</code>:</p> <pre><code>extra:\n  social:\n    - icon: fontawesome/brands/github\n      link: https://github.com/example\n</code></pre>"},{"location":"CONTRIBUTING/#style-and-conventions","title":"Style and Conventions","text":""},{"location":"CONTRIBUTING/#command-examples","title":"Command Examples","text":"<p>Always show complete commands:</p> <pre><code># Good\ncurl -X POST https://api.example.com/endpoint \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"key\": \"value\"}'\n\n# Bad\ncurl endpoint\n</code></pre>"},{"location":"CONTRIBUTING/#file-paths","title":"File Paths","text":"<p>Use absolute paths from project root:</p> <pre><code># Good\n/Users/edospadoni/Workspace/my/backend/main.go\n\n# Bad\n../backend/main.go\n</code></pre>"},{"location":"CONTRIBUTING/#api-examples","title":"API Examples","text":"<p>Show both request and response:</p> <pre><code># Request\ncurl -X GET https://api.example.com/resource\n\n# Response (HTTP 200)\n{\n  \"code\": 200,\n  \"message\": \"success\",\n  \"data\": {}\n}\n</code></pre>"},{"location":"CONTRIBUTING/#getting-help","title":"Getting Help","text":"<ul> <li>Check existing documentation for examples</li> <li>Review MkDocs documentation</li> <li>Check Material theme docs</li> <li>Ask in project discussions</li> </ul>"},{"location":"CONTRIBUTING/#license","title":"License","text":"<p>Documentation contributions are covered by the same license as the project (AGPL-3.0-or-later).</p>"}]}