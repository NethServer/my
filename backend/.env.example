# Backend Configuration File
# Copy this file to .env and modify the values as needed
# Note: Use 'sync init' command to generate Logto values automatically

# ===========================================
# SERVER CONFIGURATION
# ===========================================
LISTEN_ADDRESS=127.0.0.1:8080

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# PostgreSQL connection string (shared 'noc' database)
DATABASE_URL=postgresql://backend:backend@localhost:5432/noc?sslmode=disable

# ===========================================
# LOGTO AUTHENTICATION
# ===========================================
# Logto instance configuration (auto-derived from sync init)
LOGTO_ISSUER=https://your-tenant-id.logto.app
LOGTO_AUDIENCE=https://your-domain.com/api
JWKS_ENDPOINT=https://your-tenant-id.logto.app/oidc/jwks

# Logto Management API (from your M2M app)
BACKEND_APP_ID=your-management-api-app-id
BACKEND_APP_SECRET=your-management-api-app-secret
LOGTO_MANAGEMENT_BASE_URL=https://your-tenant-id.logto.app/api

# ===========================================
# CUSTOM JWT CONFIGURATION
# ===========================================
# Custom JWT for resilient offline operation
JWT_SECRET=your-super-secret-jwt-signing-key-min-32-chars
JWT_ISSUER=your-domain.com.api
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h

# ===========================================
# REDIS CONFIGURATION
# ===========================================
# Redis connection URL
REDIS_URL=redis://localhost:6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis connection settings
REDIS_MAX_RETRIES=3
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s

# ===========================================
# CACHE CONFIGURATION
# ===========================================
# Statistics cache settings
STATS_CACHE_TTL=10m
STATS_UPDATE_INTERVAL=5m
STATS_STALE_THRESHOLD=15m

# JIT (Just-In-Time) roles cache
JIT_ROLES_CACHE_TTL=5m
JIT_ROLES_CLEANUP_INTERVAL=2m

# Organization users cache
ORG_USERS_CACHE_TTL=3m
ORG_USERS_CLEANUP_INTERVAL=1m

# JWKS (JSON Web Key Set) cache
JWKS_CACHE_TTL=5m
JWKS_HTTP_TIMEOUT=10s

# Redis operation timeout
REDIS_OPERATION_TIMEOUT=5s

# ===========================================
# API CONFIGURATION
# ===========================================
# Default pagination
DEFAULT_PAGE_SIZE=100

# ===========================================
# SYSTEM CONFIGURATION
# ===========================================
# Allowed system types (comma-separated list)
SYSTEM_TYPES=ns8,nsec