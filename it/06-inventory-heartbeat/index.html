<!doctype html><html lang=it class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Complete user documentation for My management platform"><meta name=author content=NethServer><link href=https://nethserver.github.io/my/it/06-inventory-heartbeat/ rel=canonical><link href=../05-system-registration/ rel=prev><link href=../CONTRIBUTING/ rel=next><link rel=alternate href=../../06-inventory-heartbeat/ hreflang=en><link rel=alternate href=./ hreflang=it><link rel=icon href=../../images/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Inventario e Heartbeat - My - User Guide</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#inventario-e-heartbeat class=md-skip> Vai al contenuto </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Intestazione> <a href=../ title="My - User Guide" class="md-header__button md-logo" aria-label="My - User Guide" data-md-component=logo> <img src=../../images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> My - User Guide </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Inventario e Heartbeat </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Seleziona la lingua"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=../../06-inventory-heartbeat/ hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=./ hreflang=it class=md-select__link> Italiano </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Cerca placeholder=Cerca autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Cerca> <a href=javascript:void(0) class="md-search__icon md-icon" title=Condividi aria-label=Condividi data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Cancella aria-label=Cancella tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inizializza la ricerca </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/NethServer/my title="Apri repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> NethServer/my </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../ class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../01-authentication/ class=md-tabs__link> Guida Utente </a> </li> <li class=md-tabs__item> <a href=https://github.com/NethServer/my/blob/main/README.md class=md-tabs__link> Documentazione Sviluppatori </a> </li> <li class=md-tabs__item> <a href=../CONTRIBUTING/ class=md-tabs__link> Contribuire </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigazione data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../ title="My - User Guide" class="md-nav__button md-logo" aria-label="My - User Guide" data-md-component=logo> <img src=../../images/logo.svg alt=logo> </a> My - User Guide </label> <div class=md-nav__source> <a href=https://github.com/NethServer/my title="Apri repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> NethServer/my </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Guida Utente </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Guida Utente </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex> <span class=md-ellipsis> Per Iniziare </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Per Iniziare </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01-authentication/ class=md-nav__link> <span class=md-ellipsis> Autenticazione </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> Gestione Piattaforma </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Gestione Piattaforma </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../02-organizations/ class=md-nav__link> <span class=md-ellipsis> Organizzazioni </span> </a> </li> <li class=md-nav__item> <a href=../03-users/ class=md-nav__link> <span class=md-ellipsis> Utenti </span> </a> </li> <li class=md-nav__item> <a href=../07-impersonation/ class=md-nav__link> <span class=md-ellipsis> Impersonificazione Utente </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Sistemi </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Sistemi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../04-systems/ class=md-nav__link> <span class=md-ellipsis> Gestione Sistemi </span> </a> </li> <li class=md-nav__item> <a href=../05-system-registration/ class=md-nav__link> <span class=md-ellipsis> Registrazione Sistema </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Inventario e Heartbeat </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Inventario e Heartbeat </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Indice> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Indice </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#panoramica class=md-nav__link> <span class=md-ellipsis> Panoramica </span> </a> </li> <li class=md-nav__item> <a href=#autenticazione class=md-nav__link> <span class=md-ellipsis> Autenticazione </span> </a> <nav class=md-nav aria-label=Autenticazione> <ul class=md-nav__list> <li class=md-nav__item> <a href=#credenziali class=md-nav__link> <span class=md-ellipsis> Credenziali </span> </a> </li> <li class=md-nav__item> <a href=#http-basic-auth class=md-nav__link> <span class=md-ellipsis> HTTP Basic Auth </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#heartbeat class=md-nav__link> <span class=md-ellipsis> Heartbeat </span> </a> <nav class=md-nav aria-label=Heartbeat> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scopo class=md-nav__link> <span class=md-ellipsis> Scopo </span> </a> </li> <li class=md-nav__item> <a href=#endpoint class=md-nav__link> <span class=md-ellipsis> Endpoint </span> </a> </li> <li class=md-nav__item> <a href=#richiesta class=md-nav__link> <span class=md-ellipsis> Richiesta </span> </a> </li> <li class=md-nav__item> <a href=#risposta class=md-nav__link> <span class=md-ellipsis> Risposta </span> </a> </li> <li class=md-nav__item> <a href=#frequenza class=md-nav__link> <span class=md-ellipsis> Frequenza </span> </a> </li> <li class=md-nav__item> <a href=#esempio-di-implementazione class=md-nav__link> <span class=md-ellipsis> Esempio di Implementazione </span> </a> </li> <li class=md-nav__item> <a href=#stato-heartbeat class=md-nav__link> <span class=md-ellipsis> Stato Heartbeat </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#inventario class=md-nav__link> <span class=md-ellipsis> Inventario </span> </a> <nav class=md-nav aria-label=Inventario> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scopo_1 class=md-nav__link> <span class=md-ellipsis> Scopo </span> </a> </li> <li class=md-nav__item> <a href=#endpoint_1 class=md-nav__link> <span class=md-ellipsis> Endpoint </span> </a> </li> <li class=md-nav__item> <a href=#richiesta_1 class=md-nav__link> <span class=md-ellipsis> Richiesta </span> </a> </li> <li class=md-nav__item> <a href=#risposta_1 class=md-nav__link> <span class=md-ellipsis> Risposta </span> </a> </li> <li class=md-nav__item> <a href=#frequenza_1 class=md-nav__link> <span class=md-ellipsis> Frequenza </span> </a> </li> <li class=md-nav__item> <a href=#schema-inventario class=md-nav__link> <span class=md-ellipsis> Schema Inventario </span> </a> </li> <li class=md-nav__item> <a href=#esempio-di-implementazione_1 class=md-nav__link> <span class=md-ellipsis> Esempio di Implementazione </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rilevamento-modifiche class=md-nav__link> <span class=md-ellipsis> Rilevamento Modifiche </span> </a> <nav class=md-nav aria-label="Rilevamento Modifiche"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cosa-viene-tracciato class=md-nav__link> <span class=md-ellipsis> Cosa viene Tracciato </span> </a> </li> <li class=md-nav__item> <a href=#categorie-di-modifiche class=md-nav__link> <span class=md-ellipsis> Categorie di Modifiche </span> </a> </li> <li class=md-nav__item> <a href=#severita-modifiche class=md-nav__link> <span class=md-ellipsis> SeveritÃ  Modifiche </span> </a> </li> <li class=md-nav__item> <a href=#visualizzazione-modifiche class=md-nav__link> <span class=md-ellipsis> Visualizzazione Modifiche </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoraggio-nel-pannello-admin class=md-nav__link> <span class=md-ellipsis> Monitoraggio nel Pannello Admin </span> </a> <nav class=md-nav aria-label="Monitoraggio nel Pannello Admin"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#stato-real-time class=md-nav__link> <span class=md-ellipsis> Stato Real-time </span> </a> </li> <li class=md-nav__item> <a href=#avvisi-se-configurati class=md-nav__link> <span class=md-ellipsis> Avvisi (se configurati) </span> </a> </li> <li class=md-nav__item> <a href=#salute-sistema class=md-nav__link> <span class=md-ellipsis> Salute Sistema </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#risoluzione-problemi class=md-nav__link> <span class=md-ellipsis> Risoluzione Problemi </span> </a> <nav class=md-nav aria-label="Risoluzione Problemi"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#autenticazione-fallisce-http-401 class=md-nav__link> <span class=md-ellipsis> Autenticazione Fallisce (HTTP 401) </span> </a> </li> <li class=md-nav__item> <a href=#timeout-connessione class=md-nav__link> <span class=md-ellipsis> Timeout Connessione </span> </a> </li> <li class=md-nav__item> <a href=#inventario-non-si-aggiorna class=md-nav__link> <span class=md-ellipsis> Inventario Non si Aggiorna </span> </a> </li> <li class=md-nav__item> <a href=#heartbeat-mostra-come-dead class=md-nav__link> <span class=md-ellipsis> Heartbeat Mostra come "Dead" </span> </a> </li> <li class=md-nav__item> <a href=#modifiche-non-rilevate class=md-nav__link> <span class=md-ellipsis> Modifiche Non Rilevate </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practice class=md-nav__link> <span class=md-ellipsis> Best Practice </span> </a> <nav class=md-nav aria-label="Best Practice"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#heartbeat_1 class=md-nav__link> <span class=md-ellipsis> Heartbeat </span> </a> </li> <li class=md-nav__item> <a href=#inventario_1 class=md-nav__link> <span class=md-ellipsis> Inventario </span> </a> </li> <li class=md-nav__item> <a href=#gestione-errori class=md-nav__link> <span class=md-ellipsis> Gestione Errori </span> </a> </li> <li class=md-nav__item> <a href=#sicurezza class=md-nav__link> <span class=md-ellipsis> Sicurezza </span> </a> </li> <li class=md-nav__item> <a href=#performance class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#documentazione-correlata class=md-nav__link> <span class=md-ellipsis> Documentazione Correlata </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Documentazione Sviluppatori </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Documentazione Sviluppatori </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/README.md class=md-nav__link> <span class=md-ellipsis> Progetto Principale </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/backend/README.md class=md-nav__link> <span class=md-ellipsis> API Backend </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/collect/README.md class=md-nav__link> <span class=md-ellipsis> Servizio Collect </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/sync/README.md class=md-nav__link> <span class=md-ellipsis> Tool Sync </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../CONTRIBUTING/ class=md-nav__link> <span class=md-ellipsis> Contribuire </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/NethServer/my/edit/main/docs/it/06-inventory-heartbeat.md title=Modifica class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/NethServer/my/raw/main/docs/it/06-inventory-heartbeat.md title="Vedi il sorgente di questa pagina" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=inventario-e-heartbeat>Inventario e Heartbeat<a class=headerlink href=#inventario-e-heartbeat title="Permanent link">&para;</a></h1> <p>Scopri come i sistemi esterni inviano dati di inventario e segnali di heartbeat alla piattaforma My.</p> <h2 id=panoramica>Panoramica<a class=headerlink href=#panoramica title="Permanent link">&para;</a></h2> <p>Dopo la <a href=../05-system-registration/ >registrazione del sistema</a>, i sistemi esterni comunicano con My attraverso due meccanismi:</p> <ol> <li><strong>Inventario</strong>: Snapshot completo delle informazioni del sistema (hardware, software, configurazione)</li> <li><strong>Heartbeat</strong>: Segnale periodico "Sono vivo" per indicare che il sistema Ã¨ online</li> </ol> <p>Entrambe le operazioni usano <strong>HTTP Basic Authentication</strong> con le credenziali registrate.</p> <h2 id=autenticazione>Autenticazione<a class=headerlink href=#autenticazione title="Permanent link">&para;</a></h2> <h3 id=credenziali>Credenziali<a class=headerlink href=#credenziali title="Permanent link">&para;</a></h3> <p>Usa le credenziali ottenute durante il ciclo di vita del sistema:</p> <ul> <li><strong>Username</strong>: <code>system_key</code> (ricevuto alla registrazione)</li> <li><strong>Password</strong>: <code>system_secret</code> (dalla creazione del sistema)</li> </ul> <h3 id=http-basic-auth>HTTP Basic Auth<a class=headerlink href=#http-basic-auth title="Permanent link">&para;</a></h3> <p><strong>Formato header:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>Authorization: Basic base64(system_key:system_secret)
</span></code></pre></div></p> <p><strong>Esempio:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>system_key: NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>system_secret: my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>Base64 encode: &quot;NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE:my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0&quot;
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>Authorization: Basic bXlfc3lzX2FiYzEyM2RlZjQ1NjpteV9hMWIyYzNkNGU1ZjZnN2g4aTlqMC5rMWwybTNuNG81cDZxN3I4czl0MHUxdjJ3M3g0eTV6NmE3YjhjOWQw
</span></code></pre></div></p> <p><strong>La maggior parte delle librerie HTTP gestisce questo automaticamente:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kn>import</span><span class=w> </span><span class=nn>requests</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>    <span class=n>auth</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE&#39;</span><span class=p>,</span> <span class=s1>&#39;my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0&#39;</span><span class=p>),</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>    <span class=n>json</span><span class=o>=</span><span class=n>data</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=p>)</span>
</span></code></pre></div></p> <h2 id=heartbeat>Heartbeat<a class=headerlink href=#heartbeat title="Permanent link">&para;</a></h2> <p>L'heartbeat Ã¨ un semplice segnale per indicare che il sistema Ã¨ vivo e raggiungibile.</p> <h3 id=scopo>Scopo<a class=headerlink href=#scopo title="Permanent link">&para;</a></h3> <ul> <li>Rilevare quando i sistemi vanno offline</li> <li>Attivare avvisi per sistemi morti</li> <li>Monitorare l'affidabilitÃ  del sistema</li> </ul> <h3 id=endpoint>Endpoint<a class=headerlink href=#endpoint title="Permanent link">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>POST https://my.nethesis.it/collect/api/systems/heartbeat
</span></code></pre></div> <p><strong>Nota:</strong> Il servizio Collect Ã¨ su <strong>/collect</strong> (diverso dal backend principale su <strong>/backend</strong>)</p> <h3 id=richiesta>Richiesta<a class=headerlink href=#richiesta title="Permanent link">&para;</a></h3> <p><strong>Headers:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>Authorization: Basic &lt;credentials&gt;
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>Content-Type: application/json
</span></code></pre></div></p> <p><strong>Body:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{}</span>
</span></code></pre></div></p> <p><strong>Oggetto JSON vuoto</strong> - nessun dato necessario!</p> <h3 id=risposta>Risposta<a class=headerlink href=#risposta title="Permanent link">&para;</a></h3> <p><strong>Successo (HTTP 200):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>200</span><span class=p>,</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;heartbeat riconosciuto&quot;</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=nt>&quot;system_key&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;NOC-80F8-89A4-40B0-4AE9-A670-7C5F-99B3-F3EA&quot;</span><span class=p>,</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=nt>&quot;acknowledged&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=nt>&quot;last_heartbeat&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2025-11-07T10:37:27.360343+01:00&quot;</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=frequenza>Frequenza<a class=headerlink href=#frequenza title="Permanent link">&para;</a></h3> <p><strong>Raccomandato:</strong> Ogni 5 minuti</p> <p><strong>PerchÃ© 5 minuti?</strong> - La piattaforma considera il sistema "active" se heartbeat &lt; 15 minuti - Intervallo di 5 minuti fornisce 3 battiti mancati prima di contrassegnare come morto - Equilibrio tra traffico di rete e reattivitÃ </p> <h3 id=esempio-di-implementazione>Esempio di Implementazione<a class=headerlink href=#esempio-di-implementazione title="Permanent link">&para;</a></h3> <p><strong>Python:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kn>import</span><span class=w> </span><span class=nn>requests</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=n>COLLECT_URL</span> <span class=o>=</span> <span class=s2>&quot;https://my.nethesis.it/collect&quot;</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=n>SYSTEM_KEY</span> <span class=o>=</span> <span class=s2>&quot;NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE&quot;</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=n>SYSTEM_SECRET</span> <span class=o>=</span> <span class=s2>&quot;my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0&quot;</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=k>def</span><span class=w> </span><span class=nf>send_heartbeat</span><span class=p>():</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Invia heartbeat alla piattaforma My&quot;&quot;&quot;</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>COLLECT_URL</span><span class=si>}</span><span class=s2>/api/systems/heartbeat&quot;</span><span class=p>,</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>            <span class=n>auth</span><span class=o>=</span><span class=p>(</span><span class=n>SYSTEM_KEY</span><span class=p>,</span> <span class=n>SYSTEM_SECRET</span><span class=p>),</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>            <span class=n>json</span><span class=o>=</span><span class=p>{},</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>            <span class=n>timeout</span><span class=o>=</span><span class=mi>10</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>        <span class=p>)</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>        <span class=n>response</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Heartbeat inviato con successo&quot;</span><span class=p>)</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>        <span class=k>return</span> <span class=kc>True</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Heartbeat fallito: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>        <span class=k>return</span> <span class=kc>False</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a><span class=c1># Invia heartbeat ogni 5 minuti</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>    <span class=n>send_heartbeat</span><span class=p>()</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>300</span><span class=p>)</span>  <span class=c1># 5 minuti</span>
</span></code></pre></div></p> <p><strong>Bash (cron):</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=ch>#!/bin/bash</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1># /usr/local/bin/my-heartbeat.sh</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=nv>COLLECT_URL</span><span class=o>=</span><span class=s2>&quot;https://my.nethesis.it/collect&quot;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=nv>SYSTEM_KEY</span><span class=o>=</span><span class=s2>&quot;NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE&quot;</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=nv>SYSTEM_SECRET</span><span class=o>=</span><span class=s2>&quot;my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0&quot;</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>curl<span class=w> </span>-s<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span><span class=s2>&quot;</span><span class=nv>$COLLECT_URL</span><span class=s2>/api/systems/heartbeat&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>  </span>-u<span class=w> </span><span class=s2>&quot;</span><span class=nv>$SYSTEM_KEY</span><span class=s2>:</span><span class=nv>$SYSTEM_SECRET</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{}&#39;</span><span class=w> </span>&gt;<span class=w> </span>/dev/null
</span></code></pre></div></p> <p><strong>Entry Crontab (ogni 5 minuti):</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>*/5 * * * * /usr/local/bin/my-heartbeat.sh
</span></code></pre></div></p> <h3 id=stato-heartbeat>Stato Heartbeat<a class=headerlink href=#stato-heartbeat title="Permanent link">&para;</a></h3> <p>I sistemi sono classificati in base all'heartbeat:</p> <table> <thead> <tr> <th>Stato</th> <th>Condizione</th> <th>Colore</th> <th>Significato</th> </tr> </thead> <tbody> <tr> <td><strong>Active</strong></td> <td>&lt; 15 minuti</td> <td>ðŸŸ¢ Verde</td> <td>Il sistema Ã¨ sano</td> </tr> <tr> <td><strong>Inactive</strong></td> <td>â‰¥ 15 minuti</td> <td>ðŸŸ¡ Giallo</td> <td>Il sistema Ã¨ offline</td> </tr> <tr> <td><strong>Unknown</strong></td> <td>Mai inviato</td> <td>âšª Grigio</td> <td>Mai comunicato</td> </tr> </tbody> </table> <h2 id=inventario>Inventario<a class=headerlink href=#inventario title="Permanent link">&para;</a></h2> <p>L'inventario Ã¨ uno snapshot completo della configurazione del sistema e del software installato.</p> <h3 id=scopo_1>Scopo<a class=headerlink href=#scopo_1 title="Permanent link">&para;</a></h3> <ul> <li>Tracciare hardware e software del sistema</li> <li>Rilevare modifiche alla configurazione</li> <li>Monitorare versioni software</li> <li>Audit della conformitÃ  del sistema</li> <li>Tracciare lo storico dell'inventario</li> </ul> <h3 id=endpoint_1>Endpoint<a class=headerlink href=#endpoint_1 title="Permanent link">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>POST https://my.nethesis.it/collect/api/systems/inventory
</span></code></pre></div> <p><strong>Nota:</strong> Stesso servizio collect, porta <strong>8081</strong></p> <h3 id=richiesta_1>Richiesta<a class=headerlink href=#richiesta_1 title="Permanent link">&para;</a></h3> <p><strong>Headers:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>Authorization: Basic &lt;credentials&gt;
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>Content-Type: application/json
</span></code></pre></div></p> <p><strong>Struttura Body:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=p>{</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>&quot;fqdn&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;server.example.com&quot;</span><span class=p>,</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class=nt>&quot;ipv4_address&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;192.168.1.100&quot;</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=nt>&quot;ipv6_address&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2001:db8::1&quot;</span><span class=p>,</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;8.0.1&quot;</span><span class=p>,</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>  </span><span class=nt>&quot;os&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Rocky Linux&quot;</span><span class=p>,</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>    </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;9.3&quot;</span><span class=p>,</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>    </span><span class=nt>&quot;kernel&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;5.14.0-362.8.1.el9_3.x86_64&quot;</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>  </span><span class=nt>&quot;hardware&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>    </span><span class=nt>&quot;cpu_model&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Intel Xeon Gold 6248R&quot;</span><span class=p>,</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>    </span><span class=nt>&quot;cpu_cores&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=p>,</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>    </span><span class=nt>&quot;cpu_threads&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>16</span><span class=p>,</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>    </span><span class=nt>&quot;memory_total_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>32</span><span class=p>,</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>    </span><span class=nt>&quot;disk_total_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>  </span><span class=nt>&quot;network&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>    </span><span class=nt>&quot;hostname&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;server01&quot;</span><span class=p>,</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>    </span><span class=nt>&quot;interfaces&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a><span class=w>      </span><span class=nt>&quot;eth0&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a><span class=w>        </span><span class=nt>&quot;ip&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;192.168.1.100&quot;</span><span class=p>,</span>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a><span class=w>        </span><span class=nt>&quot;netmask&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;255.255.255.0&quot;</span><span class=p>,</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=w>        </span><span class=nt>&quot;mac&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;00:1a:2b:3c:4d:5e&quot;</span>
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a><span class=w>      </span><span class=nt>&quot;eth1&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-27><a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a><span class=w>        </span><span class=nt>&quot;ip&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;10.0.0.10&quot;</span><span class=p>,</span>
</span><span id=__span-12-28><a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a><span class=w>        </span><span class=nt>&quot;netmask&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;255.255.0.0&quot;</span><span class=p>,</span>
</span><span id=__span-12-29><a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a><span class=w>        </span><span class=nt>&quot;mac&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;00:1a:2b:3c:4d:5f&quot;</span>
</span><span id=__span-12-30><a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-12-31><a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-32><a id=__codelineno-12-32 name=__codelineno-12-32 href=#__codelineno-12-32></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-12-33><a id=__codelineno-12-33 name=__codelineno-12-33 href=#__codelineno-12-33></a><span class=w>  </span><span class=nt>&quot;services&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-34><a id=__codelineno-12-34 name=__codelineno-12-34 href=#__codelineno-12-34></a><span class=w>    </span><span class=nt>&quot;nginx&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-35><a id=__codelineno-12-35 name=__codelineno-12-35 href=#__codelineno-12-35></a><span class=w>      </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.24.0&quot;</span><span class=p>,</span>
</span><span id=__span-12-36><a id=__codelineno-12-36 name=__codelineno-12-36 href=#__codelineno-12-36></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;running&quot;</span>
</span><span id=__span-12-37><a id=__codelineno-12-37 name=__codelineno-12-37 href=#__codelineno-12-37></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-12-38><a id=__codelineno-12-38 name=__codelineno-12-38 href=#__codelineno-12-38></a><span class=w>    </span><span class=nt>&quot;postgresql&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-39><a id=__codelineno-12-39 name=__codelineno-12-39 href=#__codelineno-12-39></a><span class=w>      </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;15.5&quot;</span><span class=p>,</span>
</span><span id=__span-12-40><a id=__codelineno-12-40 name=__codelineno-12-40 href=#__codelineno-12-40></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;running&quot;</span>
</span><span id=__span-12-41><a id=__codelineno-12-41 name=__codelineno-12-41 href=#__codelineno-12-41></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-12-42><a id=__codelineno-12-42 name=__codelineno-12-42 href=#__codelineno-12-42></a><span class=w>    </span><span class=nt>&quot;redis&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-43><a id=__codelineno-12-43 name=__codelineno-12-43 href=#__codelineno-12-43></a><span class=w>      </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;7.2.3&quot;</span><span class=p>,</span>
</span><span id=__span-12-44><a id=__codelineno-12-44 name=__codelineno-12-44 href=#__codelineno-12-44></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;running&quot;</span>
</span><span id=__span-12-45><a id=__codelineno-12-45 name=__codelineno-12-45 href=#__codelineno-12-45></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-46><a id=__codelineno-12-46 name=__codelineno-12-46 href=#__codelineno-12-46></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-12-47><a id=__codelineno-12-47 name=__codelineno-12-47 href=#__codelineno-12-47></a><span class=w>  </span><span class=nt>&quot;features&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-48><a id=__codelineno-12-48 name=__codelineno-12-48 href=#__codelineno-12-48></a><span class=w>    </span><span class=nt>&quot;docker&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-49><a id=__codelineno-12-49 name=__codelineno-12-49 href=#__codelineno-12-49></a><span class=w>      </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-12-50><a id=__codelineno-12-50 name=__codelineno-12-50 href=#__codelineno-12-50></a><span class=w>      </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;24.0.7&quot;</span>
</span><span id=__span-12-51><a id=__codelineno-12-51 name=__codelineno-12-51 href=#__codelineno-12-51></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-12-52><a id=__codelineno-12-52 name=__codelineno-12-52 href=#__codelineno-12-52></a><span class=w>    </span><span class=nt>&quot;firewall&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-53><a id=__codelineno-12-53 name=__codelineno-12-53 href=#__codelineno-12-53></a><span class=w>      </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-12-54><a id=__codelineno-12-54 name=__codelineno-12-54 href=#__codelineno-12-54></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;nftables&quot;</span>
</span><span id=__span-12-55><a id=__codelineno-12-55 name=__codelineno-12-55 href=#__codelineno-12-55></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-56><a id=__codelineno-12-56 name=__codelineno-12-56 href=#__codelineno-12-56></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-12-57><a id=__codelineno-12-57 name=__codelineno-12-57 href=#__codelineno-12-57></a><span class=w>  </span><span class=nt>&quot;custom&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-58><a id=__codelineno-12-58 name=__codelineno-12-58 href=#__codelineno-12-58></a><span class=w>    </span><span class=nt>&quot;environment&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;production&quot;</span><span class=p>,</span>
</span><span id=__span-12-59><a id=__codelineno-12-59 name=__codelineno-12-59 href=#__codelineno-12-59></a><span class=w>    </span><span class=nt>&quot;datacenter&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;EU-West-1&quot;</span><span class=p>,</span>
</span><span id=__span-12-60><a id=__codelineno-12-60 name=__codelineno-12-60 href=#__codelineno-12-60></a><span class=w>    </span><span class=nt>&quot;backup_enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-12-61><a id=__codelineno-12-61 name=__codelineno-12-61 href=#__codelineno-12-61></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-12-62><a id=__codelineno-12-62 name=__codelineno-12-62 href=#__codelineno-12-62></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=risposta_1>Risposta<a class=headerlink href=#risposta_1 title="Permanent link">&para;</a></h3> <p><strong>Successo (HTTP 200):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>200</span><span class=p>,</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>  </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Inventario ricevuto e messo in coda per l&#39;elaborazione&quot;</span><span class=p>,</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span><span class=nt>&quot;data_size&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>16433</span><span class=p>,</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;I dati del tuo inventario sono stati ricevuti e saranno elaborati a breve&quot;</span><span class=p>,</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>    </span><span class=nt>&quot;queue_status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;queued&quot;</span><span class=p>,</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>    </span><span class=nt>&quot;system_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0a98637c-077b-428a-8e57-c2fbb892051a&quot;</span><span class=p>,</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>    </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2025-11-07T10:39:05.897352+01:00&quot;</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=frequenza_1>Frequenza<a class=headerlink href=#frequenza_1 title="Permanent link">&para;</a></h3> <p><strong>Raccomandato:</strong> Ogni 6 ore (4 volte al giorno)</p> <p><strong>PerchÃ© 6 ore?</strong> - Equilibrio tra freschezza e carico rete/storage - Cattura modifiche giornaliere - Riduce la crescita del database - Sufficiente per la maggior parte delle esigenze di monitoraggio</p> <p><strong>Casi speciali:</strong> - <strong>Dopo modifiche al sistema</strong>: Invia immediatamente - <strong>Durante aggiornamenti</strong>: Invia prima e dopo - <strong>On-demand</strong>: L'admin puÃ² attivare via API</p> <h3 id=schema-inventario>Schema Inventario<a class=headerlink href=#schema-inventario title="Permanent link">&para;</a></h3> <h4 id=campi-obbligatori>Campi Obbligatori<a class=headerlink href=#campi-obbligatori title="Permanent link">&para;</a></h4> <p><strong>Dati minimi richiesti:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=nt>&quot;fqdn&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;server.example.com&quot;</span><span class=p>,</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=nt>&quot;ipv4_address&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;192.168.1.100&quot;</span><span class=p>,</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=nt>&quot;os&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;NethSec&quot;</span><span class=p>,</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;nethsecurity&quot;</span><span class=p>,</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=nt>&quot;family&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;OpenWRT&quot;</span><span class=p>,</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=nt>&quot;release&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>        </span><span class=nt>&quot;full&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;8.6.0-dev+43d54cd33.20251020175318&quot;</span><span class=p>,</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>        </span><span class=nt>&quot;major&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>7</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=p>}</span>
</span></code></pre></div></p> <h4 id=sezioni-opzionali>Sezioni Opzionali<a class=headerlink href=#sezioni-opzionali title="Permanent link">&para;</a></h4> <p>Tutte le altre sezioni sono opzionali ma raccomandate:</p> <ul> <li><code>os</code>: Informazioni sistema operativo</li> <li><code>hardware</code>: Specifiche hardware fisico/virtuale</li> <li><code>network</code>: Configurazione di rete</li> <li><code>services</code>: Servizi installati e versioni</li> <li><code>features</code>: FunzionalitÃ  abilitate e capacitÃ </li> <li><code>custom</code>: Qualsiasi dato personalizzato (forma libera)</li> </ul> <h4 id=auto-rilevamento>Auto-Rilevamento<a class=headerlink href=#auto-rilevamento title="Permanent link">&para;</a></h4> <p>Alcuni campi sono auto-rilevati dalla piattaforma:</p> <ul> <li><strong>Tipo Sistema</strong>: Rilevato dai dati dell'inventario (ns8, nsec, ecc.)</li> <li><strong>Stato</strong>: Auto-aggiornato in base all'heartbeat</li> <li><strong>Ultimo Aggiornamento</strong>: Timestamp ricezione inventario</li> </ul> <h3 id=esempio-di-implementazione_1>Esempio di Implementazione<a class=headerlink href=#esempio-di-implementazione_1 title="Permanent link">&para;</a></h3> <p><strong>Python:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=kn>import</span><span class=w> </span><span class=nn>requests</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=kn>import</span><span class=w> </span><span class=nn>platform</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=kn>import</span><span class=w> </span><span class=nn>psutil</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=kn>import</span><span class=w> </span><span class=nn>json</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=n>COLLECT_URL</span> <span class=o>=</span> <span class=s2>&quot;https://my.nethesis.it/collect&quot;</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=n>SYSTEM_KEY</span> <span class=o>=</span> <span class=s2>&quot;NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE&quot;</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=n>SYSTEM_SECRET</span> <span class=o>=</span> <span class=s2>&quot;my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0&quot;</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=k>def</span><span class=w> </span><span class=nf>collect_inventory</span><span class=p>():</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Raccoglie inventario del sistema&quot;&quot;&quot;</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>    <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>        <span class=s2>&quot;fqdn&quot;</span><span class=p>:</span> <span class=n>platform</span><span class=o>.</span><span class=n>node</span><span class=p>(),</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a>        <span class=s2>&quot;ipv4_address&quot;</span><span class=p>:</span> <span class=n>get_primary_ip</span><span class=p>(),</span>  <span class=c1># Tua implementazione</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>        <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=s2>&quot;8.0.1&quot;</span><span class=p>,</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a>        <span class=s2>&quot;os&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a>            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>(),</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a>            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>platform</span><span class=o>.</span><span class=n>release</span><span class=p>(),</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a>            <span class=s2>&quot;kernel&quot;</span><span class=p>:</span> <span class=n>platform</span><span class=o>.</span><span class=n>version</span><span class=p>()</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a>        <span class=p>},</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a>        <span class=s2>&quot;hardware&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a>            <span class=s2>&quot;cpu_cores&quot;</span><span class=p>:</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>(</span><span class=n>logical</span><span class=o>=</span><span class=kc>False</span><span class=p>),</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a>            <span class=s2>&quot;cpu_threads&quot;</span><span class=p>:</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>(</span><span class=n>logical</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a>            <span class=s2>&quot;memory_total_gb&quot;</span><span class=p>:</span> <span class=nb>round</span><span class=p>(</span><span class=n>psutil</span><span class=o>.</span><span class=n>virtual_memory</span><span class=p>()</span><span class=o>.</span><span class=n>total</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span><span class=o>**</span><span class=mi>3</span><span class=p>),</span> <span class=mi>2</span><span class=p>)</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a>        <span class=p>},</span>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a>        <span class=s2>&quot;services&quot;</span><span class=p>:</span> <span class=n>collect_services</span><span class=p>(),</span>  <span class=c1># Tua implementazione</span>
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a>        <span class=s2>&quot;features&quot;</span><span class=p>:</span> <span class=n>collect_features</span><span class=p>(),</span>  <span class=c1># Tua implementazione</span>
</span><span id=__span-15-28><a id=__codelineno-15-28 name=__codelineno-15-28 href=#__codelineno-15-28></a>    <span class=p>}</span>
</span><span id=__span-15-29><a id=__codelineno-15-29 name=__codelineno-15-29 href=#__codelineno-15-29></a>
</span><span id=__span-15-30><a id=__codelineno-15-30 name=__codelineno-15-30 href=#__codelineno-15-30></a><span class=k>def</span><span class=w> </span><span class=nf>send_inventory</span><span class=p>():</span>
</span><span id=__span-15-31><a id=__codelineno-15-31 name=__codelineno-15-31 href=#__codelineno-15-31></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Invia inventario alla piattaforma My&quot;&quot;&quot;</span>
</span><span id=__span-15-32><a id=__codelineno-15-32 name=__codelineno-15-32 href=#__codelineno-15-32></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-15-33><a id=__codelineno-15-33 name=__codelineno-15-33 href=#__codelineno-15-33></a>        <span class=n>inventory</span> <span class=o>=</span> <span class=n>collect_inventory</span><span class=p>()</span>
</span><span id=__span-15-34><a id=__codelineno-15-34 name=__codelineno-15-34 href=#__codelineno-15-34></a>
</span><span id=__span-15-35><a id=__codelineno-15-35 name=__codelineno-15-35 href=#__codelineno-15-35></a>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span><span id=__span-15-36><a id=__codelineno-15-36 name=__codelineno-15-36 href=#__codelineno-15-36></a>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>COLLECT_URL</span><span class=si>}</span><span class=s2>/api/systems/inventory&quot;</span><span class=p>,</span>
</span><span id=__span-15-37><a id=__codelineno-15-37 name=__codelineno-15-37 href=#__codelineno-15-37></a>            <span class=n>auth</span><span class=o>=</span><span class=p>(</span><span class=n>SYSTEM_KEY</span><span class=p>,</span> <span class=n>SYSTEM_SECRET</span><span class=p>),</span>
</span><span id=__span-15-38><a id=__codelineno-15-38 name=__codelineno-15-38 href=#__codelineno-15-38></a>            <span class=n>json</span><span class=o>=</span><span class=n>inventory</span><span class=p>,</span>
</span><span id=__span-15-39><a id=__codelineno-15-39 name=__codelineno-15-39 href=#__codelineno-15-39></a>            <span class=n>timeout</span><span class=o>=</span><span class=mi>30</span>
</span><span id=__span-15-40><a id=__codelineno-15-40 name=__codelineno-15-40 href=#__codelineno-15-40></a>        <span class=p>)</span>
</span><span id=__span-15-41><a id=__codelineno-15-41 name=__codelineno-15-41 href=#__codelineno-15-41></a>        <span class=n>response</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span><span id=__span-15-42><a id=__codelineno-15-42 name=__codelineno-15-42 href=#__codelineno-15-42></a>
</span><span id=__span-15-43><a id=__codelineno-15-43 name=__codelineno-15-43 href=#__codelineno-15-43></a>        <span class=n>data</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span><span id=__span-15-44><a id=__codelineno-15-44 name=__codelineno-15-44 href=#__codelineno-15-44></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Inventario inviato con successo&quot;</span><span class=p>)</span>
</span><span id=__span-15-45><a id=__codelineno-15-45 name=__codelineno-15-45 href=#__codelineno-15-45></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Modifiche rilevate: </span><span class=si>{</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;changes_detected&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-15-46><a id=__codelineno-15-46 name=__codelineno-15-46 href=#__codelineno-15-46></a>        <span class=k>return</span> <span class=kc>True</span>
</span><span id=__span-15-47><a id=__codelineno-15-47 name=__codelineno-15-47 href=#__codelineno-15-47></a>
</span><span id=__span-15-48><a id=__codelineno-15-48 name=__codelineno-15-48 href=#__codelineno-15-48></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-15-49><a id=__codelineno-15-49 name=__codelineno-15-49 href=#__codelineno-15-49></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Invio inventario fallito: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-15-50><a id=__codelineno-15-50 name=__codelineno-15-50 href=#__codelineno-15-50></a>        <span class=k>return</span> <span class=kc>False</span>
</span><span id=__span-15-51><a id=__codelineno-15-51 name=__codelineno-15-51 href=#__codelineno-15-51></a>
</span><span id=__span-15-52><a id=__codelineno-15-52 name=__codelineno-15-52 href=#__codelineno-15-52></a><span class=c1># Invia inventario ogni 6 ore</span>
</span><span id=__span-15-53><a id=__codelineno-15-53 name=__codelineno-15-53 href=#__codelineno-15-53></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>
</span><span id=__span-15-54><a id=__codelineno-15-54 name=__codelineno-15-54 href=#__codelineno-15-54></a><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span><span id=__span-15-55><a id=__codelineno-15-55 name=__codelineno-15-55 href=#__codelineno-15-55></a>    <span class=n>send_inventory</span><span class=p>()</span>
</span><span id=__span-15-56><a id=__codelineno-15-56 name=__codelineno-15-56 href=#__codelineno-15-56></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>21600</span><span class=p>)</span>  <span class=c1># 6 ore</span>
</span></code></pre></div></p> <p><strong>Bash:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=ch>#!/bin/bash</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=c1># /usr/local/bin/my-inventory.sh</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=nv>COLLECT_URL</span><span class=o>=</span><span class=s2>&quot;https://my.nethesis.it/collect&quot;</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=nv>SYSTEM_KEY</span><span class=o>=</span><span class=s2>&quot;NOC-F64B-A989-C9E7-45B9-A55D-59EC-6545-40EE&quot;</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=nv>SYSTEM_SECRET</span><span class=o>=</span><span class=s2>&quot;my_a1b2c3d4e5f6g7h8i9j0.k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0&quot;</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=c1># Raccoglie inventario (esempio - personalizza per il tuo sistema)</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=nv>INVENTORY</span><span class=o>=</span><span class=k>$(</span>cat<span class=w> </span><span class=s>&lt;&lt;EOF</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=s>{</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=s>  &quot;fqdn&quot;: &quot;$(hostname -f)&quot;,</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=s>  &quot;ipv4_address&quot;: &quot;$(hostname -I | awk &#39;{print $1}&#39;)&quot;,</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=s>  &quot;version&quot;: &quot;8.0.1&quot;,</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=s>  &quot;os&quot;: {</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=s>    &quot;name&quot;: &quot;$(uname -s)&quot;,</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=s>    &quot;version&quot;: &quot;$(uname -r)&quot;</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=s>  },</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=s>  &quot;hardware&quot;: {</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=s>    &quot;cpu_cores&quot;: $(nproc),</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=s>    &quot;memory_total_gb&quot;: $(free -g | awk &#39;/^Mem:/{print $2}&#39;)</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=s>  }</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=s>}</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=s>EOF</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=k>)</span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a><span class=c1># Invia alla piattaforma</span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span><span class=s2>&quot;</span><span class=nv>$COLLECT_URL</span><span class=s2>/api/systems/inventory&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a><span class=w>  </span>-u<span class=w> </span><span class=s2>&quot;</span><span class=nv>$SYSTEM_KEY</span><span class=s2>:</span><span class=nv>$SYSTEM_SECRET</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a><span class=w>  </span>-d<span class=w> </span><span class=s2>&quot;</span><span class=nv>$INVENTORY</span><span class=s2>&quot;</span>
</span></code></pre></div></p> <h2 id=rilevamento-modifiche>Rilevamento Modifiche<a class=headerlink href=#rilevamento-modifiche title="Permanent link">&para;</a></h2> <p>My rileva automaticamente le modifiche tra gli snapshot dell'inventario.</p> <h3 id=cosa-viene-tracciato>Cosa viene Tracciato<a class=headerlink href=#cosa-viene-tracciato title="Permanent link">&para;</a></h3> <ul> <li>Modifiche hardware (CPU, memoria, disco)</li> <li>Modifiche versione software</li> <li>Aggiunte/rimozioni servizi</li> <li>Modifiche configurazione di rete</li> <li>Toggle funzionalitÃ </li> <li>Modifiche campi personalizzati</li> </ul> <h3 id=categorie-di-modifiche>Categorie di Modifiche<a class=headerlink href=#categorie-di-modifiche title="Permanent link">&para;</a></h3> <p>Le modifiche sono categorizzate per tipo:</p> <ul> <li><strong>OS</strong>: Sistema operativo e kernel</li> <li><strong>Hardware</strong>: Hardware fisico/virtuale</li> <li><strong>Network</strong>: Interfacce di rete e configurazione</li> <li><strong>Features</strong>: FunzionalitÃ  abilitate e capacitÃ </li> <li><strong>Services</strong>: Servizi installati</li> <li><strong>System</strong>: Impostazioni generali di sistema</li> </ul> <h3 id=severita-modifiche>SeveritÃ  Modifiche<a class=headerlink href=#severita-modifiche title="Permanent link">&para;</a></h3> <p>Ogni modifica ha un livello di severitÃ :</p> <ul> <li><strong>Critical</strong>: Richiede attenzione immediata (es. guasto hardware)</li> <li><strong>High</strong>: Modifiche importanti (es. aggiornamento OS)</li> <li><strong>Medium</strong>: Modifiche notevoli (es. aggiornamento servizio)</li> <li><strong>Low</strong>: Modifiche minori (es. aggiornamento metriche)</li> </ul> <h3 id=visualizzazione-modifiche>Visualizzazione Modifiche<a class=headerlink href=#visualizzazione-modifiche title="Permanent link">&para;</a></h3> <p><strong>Nel Pannello Admin:</strong> 1. Naviga su <strong>Sistemi</strong> &gt; <strong>Dettagli Sistema</strong> 2. Clicca tab <strong>Inventario</strong> 3. Visualizza sezione <strong>Modifiche</strong> 4. Vedi diff dettagliato tra versioni</p> <p><strong>Tipi di modifica:</strong> - ðŸŸ¢ <strong>Create</strong>: Nuovo campo aggiunto - ðŸŸ¡ <strong>Update</strong>: Valore campo modificato - ðŸ”´ <strong>Delete</strong>: Campo rimosso</p> <p><strong>Esempio log modifiche:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>[2025-11-06 10:30] Versione OS aggiornata
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>  - Vecchio: Rocky Linux 9.2
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>  - Nuovo: Rocky Linux 9.3
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>  - SeveritÃ : High
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>  - Categoria: OS
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>[2025-11-06 10:30] Versione Nginx aggiornata
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>  - Vecchio: 1.23.0
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>  - Nuovo: 1.24.0
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>  - SeveritÃ : Medium
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>  - Categoria: Services
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>[2025-11-06 10:30] Nuova funzionalitÃ  abilitata: Docker
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>  - Valore: 24.0.7
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>  - SeveritÃ : Medium
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a>  - Categoria: Features
</span></code></pre></div></p> <h2 id=monitoraggio-nel-pannello-admin>Monitoraggio nel Pannello Admin<a class=headerlink href=#monitoraggio-nel-pannello-admin title="Permanent link">&para;</a></h2> <h3 id=stato-real-time>Stato Real-time<a class=headerlink href=#stato-real-time title="Permanent link">&para;</a></h3> <p><strong>Vista dashboard:</strong> - Conteggio sistemi totali - Ripartizione Active / Inactive / Unknown - Modifiche inventario recenti - Sistemi che richiedono attenzione</p> <p><strong>Elenco sistemi:</strong> - Indicatore stato heartbeat (ðŸŸ¢ðŸŸ¡âšª) - Ultimo tempo heartbeat - Ultimo tempo inventario - Notifiche modifiche</p> <h3 id=avvisi-se-configurati>Avvisi (se configurati)<a class=headerlink href=#avvisi-se-configurati title="Permanent link">&para;</a></h3> <p>Avvisi automatici per: - Sistema va offline (nessun heartbeat per 15+ minuti) - Modifiche critiche rilevate nell'inventario - Nuovo sistema registrato - Discordanza versione sistema - VulnerabilitÃ  di sicurezza rilevate</p> <h3 id=salute-sistema>Salute Sistema<a class=headerlink href=#salute-sistema title="Permanent link">&para;</a></h3> <p><strong>Punteggio salute basato su:</strong> - AffidabilitÃ  heartbeat (% uptime) - Freschezza inventario - Numero di modifiche - Conteggio problemi critici</p> <h2 id=risoluzione-problemi>Risoluzione Problemi<a class=headerlink href=#risoluzione-problemi title="Permanent link">&para;</a></h2> <h3 id=autenticazione-fallisce-http-401>Autenticazione Fallisce (HTTP 401)<a class=headerlink href=#autenticazione-fallisce-http-401 title="Permanent link">&para;</a></h3> <p><strong>Problema:</strong> "Credenziali sistema non valide" o "Non autorizzato"</p> <p><strong>Soluzioni:</strong> 1. Verifica che le credenziali siano corrette: <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=nb>echo</span><span class=w> </span>-n<span class=w> </span><span class=s2>&quot;system_key:system_secret&quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>base64
</span></code></pre></div> 2. Controlla spazi extra nelle credenziali 3. Assicurati che il sistema sia registrato 4. Verifica che il secret non sia stato rigenerato 5. Testa con curl: <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>curl<span class=w> </span>-v<span class=w> </span>-u<span class=w> </span><span class=s2>&quot;system_key:system_secret&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>  </span>https://my.nethesis.it/collect/api/systems/heartbeat<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{}&#39;</span>
</span></code></pre></div></p> <h3 id=timeout-connessione>Timeout Connessione<a class=headerlink href=#timeout-connessione title="Permanent link">&para;</a></h3> <p><strong>Problema:</strong> Timeout richiesta, nessuna risposta</p> <p><strong>Soluzioni:</strong> 1. Controlla connettivitÃ  di rete: <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>ping<span class=w> </span>my.nethesis.it
</span></code></pre></div> 2. Verifica che la porta 8081 sia accessibile: <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>telnet<span class=w> </span>my.nethesis.it<span class=w> </span><span class=m>8081</span>
</span></code></pre></div> 3. Controlla regole firewall (consenti uscita verso porta 8081) 4. Verifica risoluzione DNS 5. Testa da rete diversa</p> <h3 id=inventario-non-si-aggiorna>Inventario Non si Aggiorna<a class=headerlink href=#inventario-non-si-aggiorna title="Permanent link">&para;</a></h3> <p><strong>Problema:</strong> Inventario inviato con successo ma non visibile nel pannello admin</p> <p><strong>Soluzioni:</strong> 1. Attendi 60 secondi e aggiorna (propagazione cache) 2. Verifica che stai visualizzando il sistema corretto 3. Controlla che l'inventario sia stato inviato all'endpoint corretto (porta 8081) 4. Verifica che il sistema non sia eliminato 5. Controlla log sistema per errori</p> <h3 id=heartbeat-mostra-come-dead>Heartbeat Mostra come "Dead"<a class=headerlink href=#heartbeat-mostra-come-dead title="Permanent link">&para;</a></h3> <p><strong>Problema:</strong> Il sistema mostra stato rosso/morto nonostante invii heartbeat</p> <p><strong>Soluzioni:</strong> 1. Controlla frequenza heartbeat (deve essere &lt; 15 minuti) 2. Verifica che l'heartbeat raggiunga la piattaforma: <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>curl<span class=w> </span>-v<span class=w> </span>https://my.nethesis.it/collect/api/systems/heartbeat<span class=w> </span><span class=se>\</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span>-u<span class=w> </span><span class=s2>&quot;key:secret&quot;</span><span class=w> </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span>-d<span class=w> </span><span class=s1>&#39;{}&#39;</span>
</span></code></pre></div> 3. Controlla che l'ora di sistema sia sincronizzata (NTP) 4. Verifica nessuna deriva del clock 5. Rivedi log servizio collect (solo admin)</p> <h3 id=modifiche-non-rilevate>Modifiche Non Rilevate<a class=headerlink href=#modifiche-non-rilevate title="Permanent link">&para;</a></h3> <p><strong>Problema:</strong> Inventario inviato ma nessuna modifica mostrata</p> <p><strong>Soluzioni:</strong> 1. Verifica che i dati siano effettivamente cambiati tra inventari 2. Controlla che i campi modificati siano supportati 3. Le piccole modifiche numeriche potrebbero non attivare il rilevamento 4. I campi personalizzati sono tracciati per modifiche 5. Attendi il prossimo inventario e confronta</p> <h2 id=best-practice>Best Practice<a class=headerlink href=#best-practice title="Permanent link">&para;</a></h2> <h3 id=heartbeat_1>Heartbeat<a class=headerlink href=#heartbeat_1 title="Permanent link">&para;</a></h3> <ul> <li>Invia ogni 5 minuti in modo consistente</li> <li>Usa task schedulato (cron, systemd timer)</li> <li>Logga i fallimenti heartbeat per debug</li> <li>Implementa logica di retry (exponential backoff)</li> <li>Monitora tasso di successo heartbeat</li> </ul> <h3 id=inventario_1>Inventario<a class=headerlink href=#inventario_1 title="Permanent link">&para;</a></h3> <ul> <li>Invia inventario completo ogni volta</li> <li>Non inviare aggiornamenti parziali</li> <li>Includi tutti i dati rilevanti</li> <li>Usa nomi campo consistenti</li> <li>Valida JSON prima dell'invio</li> <li>Invia immediatamente dopo modifiche significative</li> </ul> <h3 id=gestione-errori>Gestione Errori<a class=headerlink href=#gestione-errori title="Permanent link">&para;</a></h3> <ul> <li>Implementa logica di retry per fallimenti di rete</li> <li>Logga tutti gli errori con contesto</li> <li>Non riprovare errori di autenticazione (401)</li> <li>Usa exponential backoff per i retry</li> <li>Avvisa sui fallimenti ripetuti</li> </ul> <h3 id=sicurezza>Sicurezza<a class=headerlink href=#sicurezza title="Permanent link">&para;</a></h3> <ul> <li>Memorizza credenziali in modo sicuro</li> <li>Non loggare mai le credenziali</li> <li>Usa solo HTTPS</li> <li>Verifica certificati SSL</li> <li>Ruota periodicamente le credenziali</li> <li>Monitora i fallimenti di autenticazione</li> </ul> <h3 id=performance>Performance<a class=headerlink href=#performance title="Permanent link">&para;</a></h3> <ul> <li>Comprimi inventari di grandi dimensioni</li> <li>Raggruppa la raccolta dati</li> <li>Evita invii inventario non necessari</li> <li>Usa strutture dati efficienti</li> <li>Monitora la larghezza di banda di rete</li> </ul> <h2 id=documentazione-correlata>Documentazione Correlata<a class=headerlink href=#documentazione-correlata title="Permanent link">&para;</a></h2> <ul> <li><a href=../05-system-registration/ >Registrazione Sistema</a></li> <li><a href=../04-systems/ >Gestione Sistemi</a></li> <li><a href=https://github.com/NethServer/my/blob/main/backend/README.md>API Backend</a></li> <li><a href=https://github.com/NethServer/my/blob/main/collect/README.md>Servizio Collect</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Torna su </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Piede> <a href=../05-system-registration/ class="md-footer__link md-footer__link--prev" aria-label="Precedente: Registrazione Sistema"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Precedente </span> <div class=md-ellipsis> Registrazione Sistema </div> </div> </a> <a href=../CONTRIBUTING/ class="md-footer__link md-footer__link--next" aria-label="Successivo: Contribuire"> <div class=md-footer__title> <span class=md-footer__direction> Successivo </span> <div class=md-ellipsis> Contribuire </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 Nethesis S.r.l. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/NethServer/my target=_blank rel=noopener title="GitHub Repository" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.nethesis.it target=_blank rel=noopener title="Nethesis Website" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.edit", "content.action.view", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiato", "clipboard.copy": "Copia", "search.result.more.one": "1 altro in questa pagina", "search.result.more.other": "# altri in questa pagina", "search.result.none": "Nessun documento trovato", "search.result.one": "1 documento trovato", "search.result.other": "# documenti trovati", "search.result.placeholder": "Scrivi per iniziare a cercare", "search.result.term.missing": "Non presente", "select.version": "Seleziona la versione"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../javascripts/extra.js></script> </body> </html>