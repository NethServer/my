<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Complete user documentation for My management platform"><meta name=author content=NethServer><link href=https://nethserver.github.io/my/07-impersonation/ rel=canonical><link href=../03-users/ rel=prev><link href=../04-systems/ rel=next><link rel=icon href=../images/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.23"><title>User Impersonation - My - User Guide</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#user-impersonation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="My - User Guide" class="md-header__button md-logo" aria-label="My - User Guide" data-md-component=logo> <img src=../images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> My - User Guide </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> User Impersonation </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/NethServer/my title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> NethServer/my </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../01-authentication/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=https://github.com/NethServer/my/blob/main/README.md class=md-tabs__link> Developer Documentation </a> </li> <li class=md-tabs__item> <a href=../CONTRIBUTING/ class=md-tabs__link> Contributing </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="My - User Guide" class="md-nav__button md-logo" aria-label="My - User Guide" data-md-component=logo> <img src=../images/logo.svg alt=logo> </a> My - User Guide </label> <div class=md-nav__source> <a href=https://github.com/NethServer/my title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> NethServer/my </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01-authentication/ class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> Platform Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Platform Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../02-organizations/ class=md-nav__link> <span class=md-ellipsis> Organizations </span> </a> </li> <li class=md-nav__item> <a href=../03-users/ class=md-nav__link> <span class=md-ellipsis> Users </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> User Impersonation </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> User Impersonation </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#what-is-user-impersonation class=md-nav__link> <span class=md-ellipsis> What is User Impersonation? </span> </a> </li> <li class=md-nav__item> <a href=#key-features class=md-nav__link> <span class=md-ellipsis> Key Features </span> </a> <nav class=md-nav aria-label="Key Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#privacy-focused-design class=md-nav__link> <span class=md-ellipsis> üîí Privacy-Focused Design </span> </a> </li> <li class=md-nav__item> <a href=#security-controls class=md-nav__link> <span class=md-ellipsis> üõ°Ô∏è Security Controls </span> </a> </li> <li class=md-nav__item> <a href=#complete-audit-trail class=md-nav__link> <span class=md-ellipsis> üìä Complete Audit Trail </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#who-can-impersonate class=md-nav__link> <span class=md-ellipsis> Who Can Impersonate? </span> </a> <nav class=md-nav aria-label="Who Can Impersonate?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#required-permissions class=md-nav__link> <span class=md-ellipsis> Required Permissions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#impersonation-workflow class=md-nav__link> <span class=md-ellipsis> Impersonation Workflow </span> </a> <nav class=md-nav aria-label="Impersonation Workflow"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-user-enables-consent class=md-nav__link> <span class=md-ellipsis> Step 1: User Enables Consent </span> </a> </li> <li class=md-nav__item> <a href=#step-2-administrator-impersonates-user class=md-nav__link> <span class=md-ellipsis> Step 2: Administrator Impersonates User </span> </a> </li> <li class=md-nav__item> <a href=#step-3-perform-support-actions class=md-nav__link> <span class=md-ellipsis> Step 3: Perform Support Actions </span> </a> </li> <li class=md-nav__item> <a href=#step-4-exit-impersonation class=md-nav__link> <span class=md-ellipsis> Step 4: Exit Impersonation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#for-users-managing-consent class=md-nav__link> <span class=md-ellipsis> For Users: Managing Consent </span> </a> <nav class=md-nav aria-label="For Users: Managing Consent"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enabling-impersonation-consent class=md-nav__link> <span class=md-ellipsis> Enabling Impersonation Consent </span> </a> </li> <li class=md-nav__item> <a href=#checking-consent-status class=md-nav__link> <span class=md-ellipsis> Checking Consent Status </span> </a> </li> <li class=md-nav__item> <a href=#revoking-consent class=md-nav__link> <span class=md-ellipsis> Revoking Consent </span> </a> </li> <li class=md-nav__item> <a href=#viewing-impersonation-audit class=md-nav__link> <span class=md-ellipsis> Viewing Impersonation Audit </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#for-administrators-using-impersonation class=md-nav__link> <span class=md-ellipsis> For Administrators: Using Impersonation </span> </a> <nav class=md-nav aria-label="For Administrators: Using Impersonation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#checking-impersonation-availability class=md-nav__link> <span class=md-ellipsis> Checking Impersonation Availability </span> </a> </li> <li class=md-nav__item> <a href=#starting-impersonation class=md-nav__link> <span class=md-ellipsis> Starting Impersonation </span> </a> </li> <li class=md-nav__item> <a href=#during-impersonation-session class=md-nav__link> <span class=md-ellipsis> During Impersonation Session </span> </a> </li> <li class=md-nav__item> <a href=#exiting-impersonation class=md-nav__link> <span class=md-ellipsis> Exiting Impersonation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#security-and-privacy class=md-nav__link> <span class=md-ellipsis> Security and Privacy </span> </a> <nav class=md-nav aria-label="Security and Privacy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-logged class=md-nav__link> <span class=md-ellipsis> What is Logged </span> </a> </li> <li class=md-nav__item> <a href=#data-protection class=md-nav__link> <span class=md-ellipsis> Data Protection </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#common-use-cases class=md-nav__link> <span class=md-ellipsis> Common Use Cases </span> </a> <nav class=md-nav aria-label="Common Use Cases"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#troubleshooting-user-issues class=md-nav__link> <span class=md-ellipsis> Troubleshooting User Issues </span> </a> </li> <li class=md-nav__item> <a href=#training-new-users class=md-nav__link> <span class=md-ellipsis> Training New Users </span> </a> </li> <li class=md-nav__item> <a href=#permission-verification class=md-nav__link> <span class=md-ellipsis> Permission Verification </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cannot-impersonate-user class=md-nav__link> <span class=md-ellipsis> Cannot Impersonate User </span> </a> </li> <li class=md-nav__item> <a href=#consent-not-showing class=md-nav__link> <span class=md-ellipsis> Consent Not Showing </span> </a> </li> <li class=md-nav__item> <a href=#impersonation-session-ends-unexpectedly class=md-nav__link> <span class=md-ellipsis> Impersonation Session Ends Unexpectedly </span> </a> </li> <li class=md-nav__item> <a href=#cannot-see-users-data class=md-nav__link> <span class=md-ellipsis> Cannot See User's Data </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#for-users class=md-nav__link> <span class=md-ellipsis> For Users </span> </a> </li> <li class=md-nav__item> <a href=#for-administrators class=md-nav__link> <span class=md-ellipsis> For Administrators </span> </a> </li> <li class=md-nav__item> <a href=#for-organizations class=md-nav__link> <span class=md-ellipsis> For Organizations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-documentation class=md-nav__link> <span class=md-ellipsis> Related Documentation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Systems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../04-systems/ class=md-nav__link> <span class=md-ellipsis> Systems Management </span> </a> </li> <li class=md-nav__item> <a href=../05-system-registration/ class=md-nav__link> <span class=md-ellipsis> System Registration </span> </a> </li> <li class=md-nav__item> <a href=../06-inventory-heartbeat/ class=md-nav__link> <span class=md-ellipsis> Inventory & Heartbeat </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Developer Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Developer Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/README.md class=md-nav__link> <span class=md-ellipsis> Main Project </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/backend/README.md class=md-nav__link> <span class=md-ellipsis> Backend API </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/collect/README.md class=md-nav__link> <span class=md-ellipsis> Collect Service </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/NethServer/my/blob/main/sync/README.md class=md-nav__link> <span class=md-ellipsis> Sync Tool </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../CONTRIBUTING/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/NethServer/my/edit/main/docs/07-impersonation.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/NethServer/my/raw/main/docs/07-impersonation.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=user-impersonation>User Impersonation<a class=headerlink href=#user-impersonation title="Permanent link">&para;</a></h1> <p>Learn how to use the impersonation feature to troubleshoot user issues while respecting privacy and consent.</p> <h2 id=what-is-user-impersonation>What is User Impersonation?<a class=headerlink href=#what-is-user-impersonation title="Permanent link">&para;</a></h2> <p>User impersonation allows authorized administrators to temporarily access My platform as another user. This feature is useful for:</p> <ul> <li><strong>Troubleshooting</strong>: Reproduce issues users are experiencing</li> <li><strong>Support</strong>: Help users with complex operations</li> <li><strong>Training</strong>: Demonstrate features to users</li> <li><strong>Testing</strong>: Verify permissions and access controls</li> </ul> <h2 id=key-features>Key Features<a class=headerlink href=#key-features title="Permanent link">&para;</a></h2> <h3 id=privacy-focused-design>üîí Privacy-Focused Design<a class=headerlink href=#privacy-focused-design title="Permanent link">&para;</a></h3> <ul> <li><strong>User Consent Required</strong>: Users must explicitly enable impersonation</li> <li><strong>Time-Limited</strong>: Users control how long impersonation is allowed (1-168 hours)</li> <li><strong>Complete Transparency</strong>: All actions logged and visible to the user</li> <li><strong>Easy Revocation</strong>: Users can disable consent at any time</li> </ul> <h3 id=security-controls>üõ°Ô∏è Security Controls<a class=headerlink href=#security-controls title="Permanent link">&para;</a></h3> <ul> <li><strong>Permission-Based</strong>: Only Super Admin or Owner organization users can impersonate</li> <li><strong>No Self-Impersonation</strong>: Cannot impersonate your own account</li> <li><strong>No Chaining</strong>: Cannot impersonate while already impersonating another user</li> <li><strong>Automatic Expiration</strong>: Consent automatically expires after user-defined duration</li> <li><strong>Session Tracking</strong>: Each impersonation session has unique ID for audit</li> </ul> <h3 id=complete-audit-trail>üìä Complete Audit Trail<a class=headerlink href=#complete-audit-trail title="Permanent link">&para;</a></h3> <ul> <li>Every API call during impersonation is logged</li> <li>Users can view all actions performed during impersonation</li> <li>Sensitive data automatically redacted from logs</li> <li>Session-based organization for easy review</li> </ul> <h2 id=who-can-impersonate>Who Can Impersonate?<a class=headerlink href=#who-can-impersonate title="Permanent link">&para;</a></h2> <h3 id=required-permissions>Required Permissions<a class=headerlink href=#required-permissions title="Permanent link">&para;</a></h3> <p><strong>Super Admin Role:</strong> - Users with Super Admin role have <code>impersonate:users</code> permission - Can impersonate any user (with their consent) - Assigned by Owner organization users only</p> <p><strong>Owner Organization Users:</strong> - Automatically have impersonation capability - Can impersonate users in their organization hierarchy - No additional role assignment needed</p> <p><strong>Everyone Else:</strong> - Cannot see impersonation features - Cannot impersonate any user</p> <h2 id=impersonation-workflow>Impersonation Workflow<a class=headerlink href=#impersonation-workflow title="Permanent link">&para;</a></h2> <h3 id=step-1-user-enables-consent>Step 1: User Enables Consent<a class=headerlink href=#step-1-user-enables-consent title="Permanent link">&para;</a></h3> <p>Before impersonation can occur, the target user must enable consent.</p> <p><strong>For Users:</strong></p> <ol> <li>Log in to your account</li> <li>Navigate to <strong>Account Settings</strong> &gt; <strong>Impersonation</strong></li> <li>Find <strong>Consent to Impersonation</strong> section</li> <li>Click <strong>Enable Impersonation</strong></li> <li>Set duration (1-168 hours)</li> <li>Click <strong>Save</strong></li> </ol> <p><strong>What happens:</strong> - Consent is recorded with timestamp - Administrator is notified consent is available - Expires automatically after duration - Can be revoked at any time</p> <p><strong>Duration Options:</strong> - <strong>1-24 hours</strong>: Short-term troubleshooting - <strong>24-72 hours</strong>: Multi-day support - <strong>72-168 hours</strong>: Extended access (max 1 week)</p> <h3 id=step-2-administrator-impersonates-user>Step 2: Administrator Impersonates User<a class=headerlink href=#step-2-administrator-impersonates-user title="Permanent link">&para;</a></h3> <p><strong>For Administrators (Super Admin or Owner):</strong></p> <ol> <li>Navigate to <strong>Users</strong></li> <li>Find the target user</li> <li>Check if <strong>Impersonate user</strong> is available (using kebab men√π)</li> <li>Click <strong>Impersonate User</strong></li> <li>Confirm the action</li> <li>You are now acting as that user</li> </ol> <p><strong>During Impersonation:</strong></p> <p>You will see: - <strong>Banner at top</strong>: "You are impersonating [User Name]" - <strong>Exit button</strong>: Click to return to your account - <strong>All features</strong>: Exactly as the user sees them - <strong>User's permissions</strong>: Filtered by their actual permissions</p> <h3 id=step-3-perform-support-actions>Step 3: Perform Support Actions<a class=headerlink href=#step-3-perform-support-actions title="Permanent link">&para;</a></h3> <p>While impersonating:</p> <ul> <li>Navigate the platform as the user would</li> <li>Reproduce reported issues</li> <li>Perform actions on behalf of the user</li> <li>Test features and permissions</li> <li>Document findings</li> </ul> <p><strong>Remember:</strong> - All actions are logged - User can see everything you do - Treat user data with respect - Exit impersonation when done</p> <h3 id=step-4-exit-impersonation>Step 4: Exit Impersonation<a class=headerlink href=#step-4-exit-impersonation title="Permanent link">&para;</a></h3> <p><strong>To exit impersonation:</strong></p> <ol> <li>Click <strong>Exit Impersonation</strong> button in banner</li> <li>You return to your original account</li> <li>Impersonation session is closed</li> </ol> <p><strong>Automatic Exit:</strong> - Session expires after user's consent duration - If user revokes consent during impersonation - If token expires (follows consent duration)</p> <h2 id=for-users-managing-consent>For Users: Managing Consent<a class=headerlink href=#for-users-managing-consent title="Permanent link">&para;</a></h2> <h3 id=enabling-impersonation-consent>Enabling Impersonation Consent<a class=headerlink href=#enabling-impersonation-consent title="Permanent link">&para;</a></h3> <p><strong>When to enable:</strong> - When you have an issue and need support - When requesting help from administrator - Before training session - When administrator asks for consent</p> <p><strong>How to enable:</strong></p> <ol> <li>Go to <strong>Account Settings</strong> &gt; <strong>Impersonation</strong></li> <li>Click <strong>Consent to Impersonation</strong></li> <li>Choose duration: <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>‚óã 1 hour   - Quick support
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>‚óã 24 hours - Same day support
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>‚óã 72 hours - Multi-day issue
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>‚óã Custom   - Specify hours (max 168)
</span></code></pre></div></li> <li>Click <strong>Enable</strong></li> </ol> <p><strong>Confirmation:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>‚úì Impersonation consent enabled
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>  Expires: [Date and time]
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>  Duration: [X] hours
</span></code></pre></div></p> <h3 id=checking-consent-status>Checking Consent Status<a class=headerlink href=#checking-consent-status title="Permanent link">&para;</a></h3> <p><strong>To check if consent is active:</strong></p> <ol> <li>Go to <strong>Account Settings</strong> &gt; <strong>Impersonation</strong></li> <li>View <strong>Impersonation Consent</strong> section: <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>Status: Active
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>Expires: 2025-11-07 10:30:00 UTC
</span></code></pre></div></li> </ol> <h3 id=revoking-consent>Revoking Consent<a class=headerlink href=#revoking-consent title="Permanent link">&para;</a></h3> <p><strong>To disable consent:</strong></p> <ol> <li>Go to <strong>Account Settings</strong> &gt; <strong>Impersonation</strong></li> <li>Click <strong>Revoke Consent</strong></li> <li>Confirm the action</li> </ol> <p><strong>Effects:</strong> - Consent immediately disabled - Active impersonation sessions terminated - Administrator can no longer impersonate - Can be re-enabled anytime</p> <h3 id=viewing-impersonation-audit>Viewing Impersonation Audit<a class=headerlink href=#viewing-impersonation-audit title="Permanent link">&para;</a></h3> <p><strong>To see who impersonated you:</strong></p> <ol> <li>Go to <strong>Account Settings</strong> &gt; <strong>Impersonation</strong></li> <li>Under <strong>Sessions</strong></li> <li> <p>See complete history: <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>Started: 2025-11-06 10:00:00 UTC
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>Ended: 2025-11-06 11:30:00 UTC
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>Duration: 1.5 hours
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>Impersonator: John Admin (john@example.com)
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>Status: Ongoing
</span></code></pre></div></p> </li> <li> <p>Click <strong>Show audit log</strong> to see all actions</p> </li> </ol> <p><strong>Audit Information:</strong> - Date and time of each action - API endpoint called - Sensitive data automatically redacted - Result (success/failure)</p> <h2 id=for-administrators-using-impersonation>For Administrators: Using Impersonation<a class=headerlink href=#for-administrators-using-impersonation title="Permanent link">&para;</a></h2> <h3 id=checking-impersonation-availability>Checking Impersonation Availability<a class=headerlink href=#checking-impersonation-availability title="Permanent link">&para;</a></h3> <p><strong>In user list:</strong></p> <p>Users with active consent show: - <strong>Impersonate user</strong> status enabled - Consent expiration time - Click to impersonate</p> <p><strong>Users without consent:</strong> - <strong>Impersonate user</strong> status disabled</p> <h3 id=starting-impersonation>Starting Impersonation<a class=headerlink href=#starting-impersonation title="Permanent link">&para;</a></h3> <p><strong>Requirements:</strong> - User has active consent - You have Super Admin role or Owner organization role - User is not deleted or suspended - You are not already impersonating someone</p> <p><strong>Steps:</strong></p> <ol> <li><strong>Find User</strong>:</li> <li>Navigate to <strong>Users</strong></li> <li> <p>Search for target user</p> </li> <li> <p><strong>Verify Consent</strong>:</p> </li> <li>Check <strong>Impersonate user</strong> status enabled</li> <li>Check consent expiration time</li> <li> <p>Ensure sufficient time for your needs</p> </li> <li> <p><strong>Initiate Impersonation</strong>:</p> </li> <li>Click <strong>Impersonate User</strong> (using kebab men√π)</li> <li> <p>Confirm dialog: <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>You will temporarily act as user Edoardo Spadoni and have their permissions.
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a> To return to your account, click the close icon on the impersonation badge in the top bar.
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>[Cancel] [Impersonate user]
</span></code></pre></div></p> </li> <li> <p><strong>Confirmation</strong>:</p> </li> <li>You are now impersonating the user</li> <li>Banner appears at top</li> <li>Session starts</li> </ol> <h3 id=during-impersonation-session>During Impersonation Session<a class=headerlink href=#during-impersonation-session title="Permanent link">&para;</a></h3> <p><strong>Visual Indicators:</strong></p> <p>Banner at top of every page:</p> <p><strong>What You See:</strong> - Exact same interface as user - User's permissions (may be more restrictive than yours) - User's organization and data - User's customizations and preferences</p> <p><strong>What You Can Do:</strong> - Navigate all pages user can access - Perform any action user can perform - Create/edit/delete based on user permissions - Test features and reproduce issues</p> <p><strong>What You Cannot Do:</strong> - Access features user cannot access - Bypass user's permission restrictions - Impersonate another user while impersonating - Modify your own account</p> <p><strong>Best Practices:</strong> - Document your actions - Minimize time in impersonation - Only perform necessary actions - Inform user what you did - Exit when finished</p> <h3 id=exiting-impersonation>Exiting Impersonation<a class=headerlink href=#exiting-impersonation title="Permanent link">&para;</a></h3> <p><strong>Normal Exit:</strong></p> <ul> <li>Click <strong>X</strong> button in banner</li> <li>Return to your account</li> </ul> <p><strong>Automatic Exit:</strong></p> <p>Impersonation automatically ends when: - Consent duration expires - User revokes consent - Session token expires - You log out - User is suspended/deleted</p> <h2 id=security-and-privacy>Security and Privacy<a class=headerlink href=#security-and-privacy title="Permanent link">&para;</a></h2> <h3 id=what-is-logged>What is Logged<a class=headerlink href=#what-is-logged title="Permanent link">&para;</a></h3> <p><strong>Logged Information:</strong> - Timestamp of each action - API endpoint and method (GET, POST, etc.) - HTTP status code (200, 404, etc.) - Request parameters (sensitive data redacted) - Response status (sensitive data redacted)</p> <p><strong>Automatically Redacted:</strong> - Passwords - Authentication tokens - System secrets - Any field containing "password", "secret", "token"</p> <p><strong>Example Log Entry:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2025-11-06T10:15:23Z&quot;</span><span class=p>,</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nt>&quot;session_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;imp_abc123&quot;</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=nt>&quot;impersonator&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;admin@example.com&quot;</span><span class=p>,</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=nt>&quot;impersonated_user&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user@example.com&quot;</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;POST&quot;</span><span class=p>,</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>  </span><span class=nt>&quot;endpoint&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/api/users&quot;</span><span class=p>,</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>201</span><span class=p>,</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>  </span><span class=nt>&quot;request_body&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;John Doe&quot;</span><span class=p>,</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=nt>&quot;email&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;john@example.com&quot;</span><span class=p>,</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>    </span><span class=nt>&quot;password&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;[REDACTED]&quot;</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=data-protection>Data Protection<a class=headerlink href=#data-protection title="Permanent link">&para;</a></h3> <p><strong>User Control:</strong> - Users choose when to enable consent - Users control duration - Users can revoke at any time - Users see complete audit trail</p> <p><strong>Platform Protection:</strong> - No access without consent - Automatic expiration - Complete logging - Sensitive data redaction</p> <p><strong>Compliance:</strong> - Audit trail for regulatory requirements - Consent-based access model - User visibility and control - Data privacy respected</p> <h2 id=common-use-cases>Common Use Cases<a class=headerlink href=#common-use-cases title="Permanent link">&para;</a></h2> <h3 id=troubleshooting-user-issues>Troubleshooting User Issues<a class=headerlink href=#troubleshooting-user-issues title="Permanent link">&para;</a></h3> <p><strong>Scenario:</strong> User reports they cannot see a feature</p> <p><strong>Workflow:</strong> 1. User enables impersonation consent (1 hour) 2. Administrator impersonates user 3. Administrator navigates to reported area 4. Reproduces issue 5. Identifies permission/configuration problem 6. Exits impersonation 7. Fixes issue in user's settings 8. User confirms fix</p> <h3 id=training-new-users>Training New Users<a class=headerlink href=#training-new-users title="Permanent link">&para;</a></h3> <p><strong>Scenario:</strong> Training user on complex workflow</p> <p><strong>Workflow:</strong> 1. User enables impersonation (24 hours) 2. Administrator impersonates 3. Performs workflow steps 4. Documents each action 5. Exits impersonation 6. Shares audit with user 7. User reviews actions performed 8. User practices independently</p> <h3 id=permission-verification>Permission Verification<a class=headerlink href=#permission-verification title="Permanent link">&para;</a></h3> <p><strong>Scenario:</strong> Verify user has correct permissions</p> <p><strong>Workflow:</strong> 1. User enables impersonation (1 hour) 2. Administrator impersonates 3. Tests access to various features 4. Documents what is visible/accessible 5. Exits impersonation 6. Adjusts permissions if needed</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <h3 id=cannot-impersonate-user>Cannot Impersonate User<a class=headerlink href=#cannot-impersonate-user title="Permanent link">&para;</a></h3> <p><strong>Problem:</strong> Impersonate button is disabled</p> <p><strong>Solutions:</strong> 1. Check user has enabled consent: - Ask user to enable in Profile &gt; Security - Verify consent hasn't expired 2. Verify you have permissions: - Super Admin role OR - Owner organization role 3. Check user status: - User is not suspended - User is not deleted 4. Verify not already impersonating: - Exit current impersonation first</p> <h3 id=consent-not-showing>Consent Not Showing<a class=headerlink href=#consent-not-showing title="Permanent link">&para;</a></h3> <p><strong>Problem:</strong> User enabled consent but administrator doesn't see it</p> <p><strong>Solutions:</strong> 1. Refresh the page (Ctrl+F5) 2. Wait 30 seconds (cache propagation) 3. Check consent expiration time 4. Verify user saved the consent 5. Check user didn't accidentally revoke</p> <h3 id=impersonation-session-ends-unexpectedly>Impersonation Session Ends Unexpectedly<a class=headerlink href=#impersonation-session-ends-unexpectedly title="Permanent link">&para;</a></h3> <p><strong>Problem:</strong> Kicked out of impersonation session</p> <p><strong>Possible Causes:</strong> - User revoked consent - Consent duration expired - Token expired - User was suspended - Network interruption</p> <p><strong>Solutions:</strong> 1. Check if consent is still active 2. Ask user to re-enable consent 3. Check consent expiration time 4. Verify your network connection</p> <h3 id=cannot-see-users-data>Cannot See User's Data<a class=headerlink href=#cannot-see-users-data title="Permanent link">&para;</a></h3> <p><strong>Problem:</strong> During impersonation, cannot see expected data</p> <p><strong>Explanation:</strong> - You see exactly what user sees - User may have restricted permissions - Organization access may be limited - This is expected behavior</p> <p><strong>Solutions:</strong> 1. Verify user's assigned roles 2. Check user's organization membership 3. Review hierarchical permissions 4. Adjust user permissions if needed</p> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <h3 id=for-users>For Users<a class=headerlink href=#for-users title="Permanent link">&para;</a></h3> <p><strong>Enabling Consent:</strong> - Only enable when requested or needed - Set minimum necessary duration - Revoke when support is complete - Review audit trail after impersonation</p> <p><strong>Privacy:</strong> - Trust your administrators - Consent is entirely voluntary - You control when and how long - You can see everything they did</p> <h3 id=for-administrators>For Administrators<a class=headerlink href=#for-administrators title="Permanent link">&para;</a></h3> <p><strong>Before Impersonating:</strong> - Have clear purpose for impersonation - Request user enable consent - Plan what you need to do - Estimate time needed</p> <p><strong>During Impersonation:</strong> - Work efficiently - Document your actions - Only perform necessary operations - Respect user's privacy - Exit promptly when done</p> <p><strong>After Impersonation:</strong> - Inform user what was done - Document findings - Share audit if requested - Follow up on issues found</p> <h3 id=for-organizations>For Organizations<a class=headerlink href=#for-organizations title="Permanent link">&para;</a></h3> <p><strong>Policy:</strong> - Define when impersonation is appropriate - Document approval process - Train administrators - Review audit trails regularly</p> <p><strong>Security:</strong> - Limit Super Admin role assignment - Monitor impersonation usage - Review audit logs - Investigate unusual patterns</p> <h2 id=related-documentation>Related Documentation<a class=headerlink href=#related-documentation title="Permanent link">&para;</a></h2> <ul> <li><a href=../03-users/ >Users Management</a></li> <li><a href=../01-authentication/ >Authentication Guide</a></li> <li><a href=https://github.com/NethServer/my/blob/main/backend/README.md>Backend API Documentation</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../03-users/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Users"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Users </div> </div> </a> <a href=../04-systems/ class="md-footer__link md-footer__link--next" aria-label="Next: Systems Management"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Systems Management </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 Nethesis S.r.l. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/NethServer/my target=_blank rel=noopener title="GitHub Repository" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.nethesis.it target=_blank rel=noopener title="Nethesis Website" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.edit", "content.action.view", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../javascripts/extra.js></script> </body> </html>